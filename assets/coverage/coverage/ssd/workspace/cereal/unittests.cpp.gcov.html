<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - /ssd/workspace/cereal/unittests.cpp</title>
  <link rel="stylesheet" type="text/css" href="../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../index.html">top level</a> - <a href="index.html">ssd/workspace/cereal</a> - unittests.cpp<span style="font-size: 80%;"> (source / <a href="unittests.cpp.func.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1598</td>
            <td class="headerCovTableEntry">1608</td>
            <td class="headerCovTableEntryHi">99.4 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2013-07-10</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">415</td>
            <td class="headerCovTableEntry">423</td>
            <td class="headerCovTableEntryHi">98.1 %</td>
          </tr>
          <tr><td><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :   Copyright (c) 2013, Randolph Voorhies, Shane Grant
<span class="lineNum">       3 </span>            :   All rights reserved.
<span class="lineNum">       4 </span>            : 
<span class="lineNum">       5 </span>            :   Redistribution and use in source and binary forms, with or without
<span class="lineNum">       6 </span>            :   modification, are permitted provided that the following conditions are met:
<span class="lineNum">       7 </span>            :       * Redistributions of source code must retain the above copyright
<span class="lineNum">       8 </span>            :         notice, this list of conditions and the following disclaimer.
<span class="lineNum">       9 </span>            :       * Redistributions in binary form must reproduce the above copyright
<span class="lineNum">      10 </span>            :         notice, this list of conditions and the following disclaimer in the
<span class="lineNum">      11 </span>            :         documentation and/or other materials provided with the distribution.
<span class="lineNum">      12 </span>            :       * Neither the name of cereal nor the
<span class="lineNum">      13 </span>            :         names of its contributors may be used to endorse or promote products
<span class="lineNum">      14 </span>            :         derived from this software without specific prior written permission.
<span class="lineNum">      15 </span>            : 
<span class="lineNum">      16 </span>            :   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
<span class="lineNum">      17 </span>            :   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
<span class="lineNum">      18 </span>            :   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
<span class="lineNum">      19 </span>            :   DISCLAIMED. IN NO EVENT SHALL &lt;COPYRIGHT HOLDER&gt; BE LIABLE FOR ANY
<span class="lineNum">      20 </span>            :   DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
<span class="lineNum">      21 </span>            :   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
<span class="lineNum">      22 </span>            :   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
<span class="lineNum">      23 </span>            :   ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
<span class="lineNum">      24 </span>            :   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
<span class="lineNum">      25 </span>            :   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
<span class="lineNum">      26 </span>            : */
<span class="lineNum">      27 </span>            : #include &lt;cereal/types/memory.hpp&gt;
<span class="lineNum">      28 </span>            : #include &lt;cereal/types/array.hpp&gt;
<span class="lineNum">      29 </span>            : #include &lt;cereal/types/vector.hpp&gt;
<span class="lineNum">      30 </span>            : #include &lt;cereal/types/deque.hpp&gt;
<span class="lineNum">      31 </span>            : #include &lt;cereal/types/forward_list.hpp&gt;
<span class="lineNum">      32 </span>            : #include &lt;cereal/types/list.hpp&gt;
<span class="lineNum">      33 </span>            : #include &lt;cereal/types/string.hpp&gt;
<span class="lineNum">      34 </span>            : #include &lt;cereal/types/map.hpp&gt;
<span class="lineNum">      35 </span>            : #include &lt;cereal/types/queue.hpp&gt;
<span class="lineNum">      36 </span>            : #include &lt;cereal/types/set.hpp&gt;
<span class="lineNum">      37 </span>            : #include &lt;cereal/types/stack.hpp&gt;
<span class="lineNum">      38 </span>            : #include &lt;cereal/types/unordered_map.hpp&gt;
<span class="lineNum">      39 </span>            : #include &lt;cereal/types/unordered_set.hpp&gt;
<span class="lineNum">      40 </span>            : #include &lt;cereal/types/utility.hpp&gt;
<span class="lineNum">      41 </span>            : #include &lt;cereal/types/tuple.hpp&gt;
<span class="lineNum">      42 </span>            : #include &lt;cereal/types/bitset.hpp&gt;
<span class="lineNum">      43 </span>            : #include &lt;cereal/types/complex.hpp&gt;
<span class="lineNum">      44 </span>            : #include &lt;cereal/types/chrono.hpp&gt;
<span class="lineNum">      45 </span>            : #include &lt;cereal/types/polymorphic.hpp&gt;
<span class="lineNum">      46 </span>            : 
<span class="lineNum">      47 </span>            : #include &lt;cereal/archives/binary.hpp&gt;
<span class="lineNum">      48 </span>            : #include &lt;cereal/archives/xml.hpp&gt;
<span class="lineNum">      49 </span>            : #include &lt;cereal/archives/json.hpp&gt;
<span class="lineNum">      50 </span>            : #include &lt;limits&gt;
<span class="lineNum">      51 </span>            : #include &lt;random&gt;
<span class="lineNum">      52 </span>            : 
<span class="lineNum">      53 </span>            : namespace boost
<a name="54"><span class="lineNum">      54 </span>            : {</a>
<span class="lineNum">      55 </span>            :   template&lt;class F, class S&gt;
<span class="lineNum">      56 </span><span class="lineNoCov">          0 :   ::std::ostream &amp; operator&lt;&lt;(::std::ostream &amp; os, ::std::pair&lt;F, S&gt; const &amp; p)</span>
<span class="lineNum">      57 </span>            :   {
<span class="lineNum">      58 </span><span class="lineNoCov">          0 :     os &lt;&lt; &quot;([&quot; &lt;&lt; p.first &lt;&lt; &quot;], [&quot; &lt;&lt; p.second &lt;&lt; &quot;])&quot;;</span>
<span class="lineNum">      59 </span><span class="lineNoCov">          0 :     return os;</span>
<span class="lineNum">      60 </span>            :   }
<span class="lineNum">      61 </span>            : }
<span class="lineNum">      62 </span>            : 
<span class="lineNum">      63 </span>            : 
<span class="lineNum">      64 </span>            : namespace cereal
<a name="65"><span class="lineNum">      65 </span>            : {</a>
<span class="lineNum">      66 </span>            :   template &lt;class Archive, class T&gt;
<span class="lineNum">      67 </span><span class="lineCov">       3000 :     void serialize( Archive &amp;, std::less&lt;T&gt; &amp; )</span>
<span class="lineNum">      68 </span><span class="lineCov">       3000 :     { }</span>
<span class="lineNum">      69 </span>            : }
<span class="lineNum">      70 </span>            : 
<span class="lineNum">      71 </span>            : #define BOOST_TEST_DYN_LINK
<span class="lineNum">      72 </span>            : #define BOOST_TEST_MODULE Cereal
<span class="lineNum">      73 </span>            : #include &lt;boost/test/unit_test.hpp&gt;
<span class="lineNum">      74 </span>            : 
<span class="lineNum">      75 </span>            : struct StructBase
<a name="76"><span class="lineNum">      76 </span>            : {</a>
<span class="lineNum">      77 </span>            :   int x, y;
<a name="78"><span class="lineNum">      78 </span><span class="lineCov">    2514034 :   bool operator==(StructBase const &amp; other) const</span></a>
<span class="lineNum">      79 </span><span class="lineCov">    2514034 :   { return x == other.x &amp;&amp; y == other.y; }</span>
<a name="80"><span class="lineNum">      80 </span><span class="lineCov">    1380000 :   bool operator!=(StructBase const &amp; other) const</span></a>
<span class="lineNum">      81 </span><span class="lineCov">    1380000 :   { return x != other.x || y != other.y; }</span>
<span class="lineNum">      82 </span><span class="lineCov">   11552005 :   bool operator&lt;(StructBase const &amp; other) const</span>
<span class="lineNum">      83 </span>            :   {
<span class="lineNum">      84 </span><span class="lineCov">   11552005 :     if (x &lt; other.x) return true;</span>
<span class="lineNum">      85 </span><span class="lineCov">    4602692 :     else if(other.x &lt; x) return false;</span>
<span class="lineNum">      86 </span><span class="lineCov">    1800000 :     else return (y &lt; other.y);</span>
<span class="lineNum">      87 </span>            :   }
<a name="88"><span class="lineNum">      88 </span>            : };</a>
<span class="lineNum">      89 </span>            : 
<span class="lineNum">      90 </span><span class="lineNoCov">          0 : std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, StructBase const &amp; s)</span>
<span class="lineNum">      91 </span>            : {
<span class="lineNum">      92 </span><span class="lineNoCov">          0 :     os &lt;&lt; &quot;[x: &quot; &lt;&lt; s.x &lt;&lt; &quot; y: &quot; &lt;&lt; s.y &lt;&lt; &quot;]&quot;;</span>
<span class="lineNum">      93 </span><span class="lineNoCov">          0 :     return os;</span>
<span class="lineNum">      94 </span>            : }
<span class="lineNum">      95 </span>            : 
<a name="96"><span class="lineNum">      96 </span>            : struct StructInternalSerialize : StructBase</a>
<a name="97"><span class="lineNum">      97 </span>            : {</a>
<span class="lineNum">      98 </span><span class="lineCov">    1052073 :   StructInternalSerialize() : StructBase{0,0} {}</span>
<a name="99"><span class="lineNum">      99 </span><span class="lineCov">     842100 :   StructInternalSerialize(int x_, int y_) : StructBase{x_,y_} {}</span></a>
<span class="lineNum">     100 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     101 </span><span class="lineCov">    1804146 :     void serialize(Archive &amp; ar)</span>
<span class="lineNum">     102 </span>            :     {
<span class="lineNum">     103 </span><span class="lineCov">    1804146 :       ar(x, y);</span>
<span class="lineNum">     104 </span><span class="lineCov">    1804146 :     }</span>
<span class="lineNum">     105 </span>            : };
<span class="lineNum">     106 </span>            : 
<a name="107"><span class="lineNum">     107 </span>            : struct StructInternalSplit : StructBase</a>
<a name="108"><span class="lineNum">     108 </span>            : {</a>
<span class="lineNum">     109 </span><span class="lineCov">     752082 :   StructInternalSplit() : StructBase{0,0} {}</span>
<a name="110"><span class="lineNum">     110 </span><span class="lineCov">     542100 :   StructInternalSplit(int x_, int y_) : StructBase{x_,y_} {}</span></a>
<span class="lineNum">     111 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     112 </span><span class="lineCov">     602082 :     void save(Archive &amp; ar) const</span>
<span class="lineNum">     113 </span>            :     {
<span class="lineNum">     114 </span><span class="lineCov">     602082 :       ar(x, y);</span>
<span class="lineNum">     115 </span><span class="lineCov">     602082 :     }</span>
<a name="116"><span class="lineNum">     116 </span>            : </a>
<span class="lineNum">     117 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     118 </span><span class="lineCov">     602082 :     void load(Archive &amp; ar)</span>
<span class="lineNum">     119 </span>            :     {
<span class="lineNum">     120 </span><span class="lineCov">     602082 :       ar(x, y);</span>
<span class="lineNum">     121 </span><span class="lineCov">     602082 :     }</span>
<span class="lineNum">     122 </span>            : };
<span class="lineNum">     123 </span>            : 
<a name="124"><span class="lineNum">     124 </span>            : struct StructExternalSerialize : StructBase</a>
<a name="125"><span class="lineNum">     125 </span>            : {</a>
<span class="lineNum">     126 </span><span class="lineCov">     753300 :   StructExternalSerialize() : StructBase{0,0} {}</span>
<span class="lineNum">     127 </span><span class="lineCov">     543300 :   StructExternalSerialize(int x_, int y_) : StructBase{x_,y_} {}</span>
<span class="lineNum">     128 </span>            : };
<a name="129"><span class="lineNum">     129 </span>            : </a>
<span class="lineNum">     130 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     131 </span><span class="lineCov">    1206600 : void serialize(Archive &amp; ar, StructExternalSerialize &amp; s)</span>
<span class="lineNum">     132 </span>            : {
<span class="lineNum">     133 </span><span class="lineCov">    1206600 :   ar(s.x, s.y);</span>
<span class="lineNum">     134 </span><span class="lineCov">    1206600 : }</span>
<span class="lineNum">     135 </span>            : 
<a name="136"><span class="lineNum">     136 </span>            : struct StructExternalSplit : StructBase</a>
<a name="137"><span class="lineNum">     137 </span>            : {</a>
<span class="lineNum">     138 </span><span class="lineCov">     740691 :   StructExternalSplit() : StructBase{0,0} {}</span>
<span class="lineNum">     139 </span><span class="lineCov">     540900 :   StructExternalSplit(int x_, int y_) : StructBase{x_,y_} {}</span>
<span class="lineNum">     140 </span>            : };
<a name="141"><span class="lineNum">     141 </span>            : </a>
<span class="lineNum">     142 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     143 </span><span class="lineCov">     590691 : void save(Archive &amp; ar, StructExternalSplit const &amp; s)</span>
<span class="lineNum">     144 </span>            : {
<span class="lineNum">     145 </span><span class="lineCov">     590691 :   ar(s.x, s.y);</span>
<span class="lineNum">     146 </span><span class="lineCov">     590691 : }</span>
<a name="147"><span class="lineNum">     147 </span>            : </a>
<span class="lineNum">     148 </span>            :   template&lt;class Archive&gt;
<span class="lineNum">     149 </span><span class="lineCov">     590691 : void load(Archive &amp; ar, StructExternalSplit &amp; s)</span>
<span class="lineNum">     150 </span>            : {
<span class="lineNum">     151 </span><span class="lineCov">     590691 :   ar(s.x, s.y);</span>
<span class="lineNum">     152 </span><span class="lineCov">     590691 : }</span>
<span class="lineNum">     153 </span>            : 
<span class="lineNum">     154 </span>            : 
<span class="lineNum">     155 </span>            : template&lt;class T&gt;
<a name="156"><span class="lineNum">     156 </span>            : struct StructHash {</a>
<span class="lineNum">     157 </span>            :   public:
<span class="lineNum">     158 </span><span class="lineCov">    1320000 :     size_t operator()(const T &amp; s) const</span>
<span class="lineNum">     159 </span>            :     {
<span class="lineNum">     160 </span><span class="lineCov">    1320000 :       size_t h1 = std::hash&lt;int&gt;()(s.x);</span>
<span class="lineNum">     161 </span><span class="lineCov">    1320000 :       size_t h2 = std::hash&lt;int&gt;()(s.y);</span>
<span class="lineNum">     162 </span><span class="lineCov">    1320000 :       return h1 ^ ( h2 &lt;&lt; 1 );</span>
<span class="lineNum">     163 </span>            :     }
<span class="lineNum">     164 </span>            : };
<span class="lineNum">     165 </span>            : 
<span class="lineNum">     166 </span>            : 
<a name="167"><span class="lineNum">     167 </span>            : template&lt;class T&gt;</a>
<span class="lineNum">     168 </span>            : typename std::enable_if&lt;std::is_floating_point&lt;T&gt;::value, T&gt;::type
<span class="lineNum">     169 </span><span class="lineCov">       3600 : random_value(std::mt19937 &amp; gen)</span>
<span class="lineNum">     170 </span><span class="lineCov">       3600 : { return std::uniform_real_distribution&lt;T&gt;(-10000.0, 10000.0)(gen); }</span>
<span class="lineNum">     171 </span>            : 
<a name="172"><span class="lineNum">     172 </span>            : template&lt;class T&gt;</a>
<span class="lineNum">     173 </span>            : typename std::enable_if&lt;std::is_integral&lt;T&gt;::value, T&gt;::type
<span class="lineNum">     174 </span><span class="lineCov">    5967300 : random_value(std::mt19937 &amp; gen)</span>
<span class="lineNum">     175 </span><span class="lineCov">    5967300 : { return std::uniform_int_distribution&lt;T&gt;(std::numeric_limits&lt;T&gt;::lowest(), std::numeric_limits&lt;T&gt;::max())(gen); }</span>
<span class="lineNum">     176 </span>            : 
<a name="177"><span class="lineNum">     177 </span>            : template&lt;class T&gt;</a>
<span class="lineNum">     178 </span>            : typename std::enable_if&lt;std::is_same&lt;T, std::string&gt;::value, std::string&gt;::type
<span class="lineNum">     179 </span><span class="lineCov">     120000 : random_value(std::mt19937 &amp; gen)</span>
<span class="lineNum">     180 </span>            : {
<span class="lineNum">     181 </span><span class="lineCov">     120000 :   std::string s(std::uniform_int_distribution&lt;int&gt;(3, 30)(gen), ' ');</span>
<span class="lineNum">     182 </span><span class="lineCov">    2101053 :   for(char &amp; c : s)</span>
<span class="lineNum">     183 </span><span class="lineCov">    1981053 :     c = std::uniform_int_distribution&lt;char&gt;(' ', '~')(gen);</span>
<span class="lineNum">     184 </span><span class="lineCov">     120000 :   return s;</span>
<span class="lineNum">     185 </span>            : }
<a name="186"><span class="lineNum">     186 </span>            : </a>
<span class="lineNum">     187 </span>            : template&lt;class C&gt;
<span class="lineNum">     188 </span><span class="lineCov">        600 : std::basic_string&lt;C&gt; random_basic_string(std::mt19937 &amp; gen)</span>
<span class="lineNum">     189 </span>            : {
<span class="lineNum">     190 </span><span class="lineCov">        600 :   std::basic_string&lt;C&gt; s(std::uniform_int_distribution&lt;int&gt;(3, 30)(gen), ' ');</span>
<span class="lineNum">     191 </span><span class="lineCov">      10474 :   for(C &amp; c : s)</span>
<span class="lineNum">     192 </span><span class="lineCov">       9874 :     c = std::uniform_int_distribution&lt;C&gt;(' ', '~')(gen);</span>
<span class="lineNum">     193 </span><span class="lineCov">        600 :   return s;</span>
<span class="lineNum">     194 </span>            : }
<a name="195"><span class="lineNum">     195 </span>            : </a>
<span class="lineNum">     196 </span>            : template &lt;size_t N&gt;
<span class="lineNum">     197 </span><span class="lineCov">        900 : std::string random_binary_string(std::mt19937 &amp; gen)</span>
<span class="lineNum">     198 </span>            : {
<span class="lineNum">     199 </span><span class="lineCov">        900 :   std::string s(N, ' ');</span>
<span class="lineNum">     200 </span><span class="lineCov">     106800 :   for(auto &amp; c : s )</span>
<span class="lineNum">     201 </span><span class="lineCov">     105900 :     c = std::uniform_int_distribution&lt;char&gt;('0', '1')(gen);</span>
<span class="lineNum">     202 </span><span class="lineCov">        900 :   return s;</span>
<span class="lineNum">     203 </span>            : }
<span class="lineNum">     204 </span>            : 
<a name="205"><span class="lineNum">     205 </span>            : // ######################################################################</a>
<span class="lineNum">     206 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     207 </span><span class="lineCov">          3 : void test_pod()</span>
<span class="lineNum">     208 </span>            : {
<span class="lineNum">     209 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     210 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     211 </span>            : 
<span class="lineNum">     212 </span><span class="lineCov">        303 :   for(size_t i=0; i&lt;100; ++i)</span>
<span class="lineNum">     213 </span>            :   {
<span class="lineNum">     214 </span><span class="lineCov">        300 :     bool     const o_bool   = random_value&lt;uint8_t&gt;(gen) % 2 ? true : false;</span>
<span class="lineNum">     215 </span><span class="lineCov">        300 :     uint8_t  const o_uint8  = random_value&lt;uint8_t&gt;(gen);</span>
<span class="lineNum">     216 </span><span class="lineCov">        300 :     int8_t   const o_int8   = random_value&lt;int8_t&gt;(gen);</span>
<span class="lineNum">     217 </span><span class="lineCov">        300 :     uint16_t const o_uint16 = random_value&lt;uint16_t&gt;(gen);</span>
<span class="lineNum">     218 </span><span class="lineCov">        300 :     int16_t  const o_int16  = random_value&lt;int16_t&gt;(gen);</span>
<span class="lineNum">     219 </span><span class="lineCov">        300 :     uint32_t const o_uint32 = random_value&lt;uint32_t&gt;(gen);</span>
<span class="lineNum">     220 </span><span class="lineCov">        300 :     int32_t  const o_int32  = random_value&lt;int32_t&gt;(gen);</span>
<span class="lineNum">     221 </span><span class="lineCov">        300 :     uint64_t const o_uint64 = random_value&lt;uint64_t&gt;(gen);</span>
<span class="lineNum">     222 </span><span class="lineCov">        300 :     int64_t  const o_int64  = random_value&lt;int64_t&gt;(gen);</span>
<span class="lineNum">     223 </span><span class="lineCov">        300 :     float    const o_float  = random_value&lt;float&gt;(gen);</span>
<span class="lineNum">     224 </span><span class="lineCov">        300 :     double   const o_double = random_value&lt;double&gt;(gen);</span>
<span class="lineNum">     225 </span>            : 
<span class="lineNum">     226 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">     227 </span>            :     {
<span class="lineNum">     228 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     229 </span><span class="lineCov">        300 :       oar(o_bool);</span>
<span class="lineNum">     230 </span><span class="lineCov">        300 :       oar(o_uint8);</span>
<span class="lineNum">     231 </span><span class="lineCov">        300 :       oar(o_int8);</span>
<span class="lineNum">     232 </span><span class="lineCov">        300 :       oar(o_uint16);</span>
<span class="lineNum">     233 </span><span class="lineCov">        300 :       oar(o_int16);</span>
<span class="lineNum">     234 </span><span class="lineCov">        300 :       oar(o_uint32);</span>
<span class="lineNum">     235 </span><span class="lineCov">        300 :       oar(o_int32);</span>
<span class="lineNum">     236 </span><span class="lineCov">        300 :       oar(o_uint64);</span>
<span class="lineNum">     237 </span><span class="lineCov">        300 :       oar(o_int64);</span>
<span class="lineNum">     238 </span><span class="lineCov">        300 :       oar(o_float);</span>
<span class="lineNum">     239 </span><span class="lineCov">        300 :       oar(o_double);</span>
<span class="lineNum">     240 </span>            :     }
<span class="lineNum">     241 </span>            : 
<span class="lineNum">     242 </span><span class="lineCov">        300 :     bool     i_bool   = false;</span>
<span class="lineNum">     243 </span><span class="lineCov">        300 :     uint8_t  i_uint8  = 0.0;</span>
<span class="lineNum">     244 </span><span class="lineCov">        300 :     int8_t   i_int8   = 0.0;</span>
<span class="lineNum">     245 </span><span class="lineCov">        300 :     uint16_t i_uint16 = 0.0;</span>
<span class="lineNum">     246 </span><span class="lineCov">        300 :     int16_t  i_int16  = 0.0;</span>
<span class="lineNum">     247 </span><span class="lineCov">        300 :     uint32_t i_uint32 = 0.0;</span>
<span class="lineNum">     248 </span><span class="lineCov">        300 :     int32_t  i_int32  = 0.0;</span>
<span class="lineNum">     249 </span><span class="lineCov">        300 :     uint64_t i_uint64 = 0.0;</span>
<span class="lineNum">     250 </span><span class="lineCov">        300 :     int64_t  i_int64  = 0.0;</span>
<span class="lineNum">     251 </span><span class="lineCov">        300 :     float    i_float  = 0.0;</span>
<span class="lineNum">     252 </span><span class="lineCov">        300 :     double   i_double = 0.0;</span>
<span class="lineNum">     253 </span>            : 
<span class="lineNum">     254 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     255 </span>            :     {
<span class="lineNum">     256 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     257 </span><span class="lineCov">        300 :       iar(i_bool);</span>
<span class="lineNum">     258 </span><span class="lineCov">        300 :       iar(i_uint8);</span>
<span class="lineNum">     259 </span><span class="lineCov">        300 :       iar(i_int8);</span>
<span class="lineNum">     260 </span><span class="lineCov">        300 :       iar(i_uint16);</span>
<span class="lineNum">     261 </span><span class="lineCov">        300 :       iar(i_int16);</span>
<span class="lineNum">     262 </span><span class="lineCov">        300 :       iar(i_uint32);</span>
<span class="lineNum">     263 </span><span class="lineCov">        300 :       iar(i_int32);</span>
<span class="lineNum">     264 </span><span class="lineCov">        300 :       iar(i_uint64);</span>
<span class="lineNum">     265 </span><span class="lineCov">        300 :       iar(i_int64);</span>
<span class="lineNum">     266 </span><span class="lineCov">        300 :       iar(i_float);</span>
<span class="lineNum">     267 </span><span class="lineCov">        300 :       iar(i_double);</span>
<span class="lineNum">     268 </span>            :     }
<span class="lineNum">     269 </span>            : 
<span class="lineNum">     270 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_bool   , o_bool);</span>
<span class="lineNum">     271 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_uint8  , o_uint8);</span>
<span class="lineNum">     272 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_int8   , o_int8);</span>
<span class="lineNum">     273 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_uint16 , o_uint16);</span>
<span class="lineNum">     274 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_int16  , o_int16);</span>
<span class="lineNum">     275 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_uint32 , o_uint32);</span>
<span class="lineNum">     276 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_int32  , o_int32);</span>
<span class="lineNum">     277 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_uint64 , o_uint64);</span>
<span class="lineNum">     278 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_int64  , o_int64);</span>
<span class="lineNum">     279 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE(i_float  , o_float,  1e-5);</span>
<span class="lineNum">     280 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE(i_double , o_double, 1e-5);</span>
<span class="lineNum">     281 </span><span class="lineCov">          3 :   }</span>
<a name="282"><span class="lineNum">     282 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     283 </span>            : 
<span class="lineNum">     284 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_pod )</span>
<span class="lineNum">     285 </span>            : {
<span class="lineNum">     286 </span><span class="lineCov">          1 :   test_pod&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="287"><span class="lineNum">     287 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     288 </span>            : 
<span class="lineNum">     289 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_pod )</span>
<span class="lineNum">     290 </span>            : {
<span class="lineNum">     291 </span><span class="lineCov">          1 :   test_pod&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="292"><span class="lineNum">     292 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     293 </span>            : 
<span class="lineNum">     294 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_pod )</span>
<span class="lineNum">     295 </span>            : {
<span class="lineNum">     296 </span><span class="lineCov">          1 :   test_pod&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     297 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     298 </span>            : 
<a name="299"><span class="lineNum">     299 </span>            : // ######################################################################</a>
<span class="lineNum">     300 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     301 </span><span class="lineCov">          3 : void test_structs()</span>
<span class="lineNum">     302 </span>            : {
<span class="lineNum">     303 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     304 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     305 </span>            : 
<span class="lineNum">     306 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     307 </span>            :   {
<span class="lineNum">     308 </span><span class="lineCov">        300 :     StructInternalSerialize o_iser = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     309 </span><span class="lineCov">        300 :     StructInternalSplit     o_ispl = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     310 </span><span class="lineCov">        300 :     StructExternalSerialize o_eser = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     311 </span><span class="lineCov">        300 :     StructExternalSplit     o_espl = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     312 </span>            : 
<span class="lineNum">     313 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">     314 </span>            :     {
<span class="lineNum">     315 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     316 </span><span class="lineCov">        300 :       oar( o_iser, o_ispl, o_eser, o_espl);</span>
<span class="lineNum">     317 </span>            :     }
<span class="lineNum">     318 </span>            : 
<span class="lineNum">     319 </span><span class="lineCov">        300 :     StructInternalSerialize i_iser;</span>
<span class="lineNum">     320 </span><span class="lineCov">        300 :     StructInternalSplit     i_ispl;</span>
<span class="lineNum">     321 </span><span class="lineCov">        300 :     StructExternalSerialize i_eser;</span>
<span class="lineNum">     322 </span><span class="lineCov">        300 :     StructExternalSplit     i_espl;</span>
<span class="lineNum">     323 </span>            : 
<span class="lineNum">     324 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     325 </span>            :     {
<span class="lineNum">     326 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     327 </span><span class="lineCov">        300 :       iar( i_iser, i_ispl, i_eser, i_espl);</span>
<span class="lineNum">     328 </span>            :     }
<span class="lineNum">     329 </span>            : 
<span class="lineNum">     330 </span><span class="lineCov">        300 :     BOOST_CHECK(i_iser == o_iser);</span>
<span class="lineNum">     331 </span><span class="lineCov">        300 :     BOOST_CHECK(i_ispl == o_ispl);</span>
<span class="lineNum">     332 </span><span class="lineCov">        300 :     BOOST_CHECK(i_eser == o_eser);</span>
<span class="lineNum">     333 </span><span class="lineCov">        300 :     BOOST_CHECK(i_espl == o_espl);</span>
<span class="lineNum">     334 </span><span class="lineCov">          3 :   }</span>
<a name="335"><span class="lineNum">     335 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     336 </span>            : 
<span class="lineNum">     337 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_structs )</span>
<span class="lineNum">     338 </span>            : {
<span class="lineNum">     339 </span><span class="lineCov">          1 :   test_structs&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="340"><span class="lineNum">     340 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     341 </span>            : 
<span class="lineNum">     342 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_structs )</span>
<span class="lineNum">     343 </span>            : {
<span class="lineNum">     344 </span><span class="lineCov">          1 :   test_structs&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="345"><span class="lineNum">     345 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     346 </span>            : 
<span class="lineNum">     347 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_structs )</span>
<span class="lineNum">     348 </span>            : {
<span class="lineNum">     349 </span><span class="lineCov">          1 :   test_structs&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     350 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     351 </span>            : 
<a name="352"><span class="lineNum">     352 </span>            : // ######################################################################</a>
<span class="lineNum">     353 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     354 </span><span class="lineCov">          3 : void test_array()</span>
<span class="lineNum">     355 </span>            : {
<span class="lineNum">     356 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     357 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     358 </span>            : 
<span class="lineNum">     359 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     360 </span>            :   {
<span class="lineNum">     361 </span>            :     std::array&lt;int, 100&gt; o_podarray;
<span class="lineNum">     362 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_podarray)</span>
<span class="lineNum">     363 </span><span class="lineCov">      30000 :       elem = random_value&lt;decltype(o_podarray)::value_type&gt;(gen);</span>
<span class="lineNum">     364 </span>            : 
<span class="lineNum">     365 </span><span class="lineCov">        300 :     std::array&lt;StructInternalSerialize, 100&gt; o_iserarray;</span>
<span class="lineNum">     366 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_iserarray)</span>
<span class="lineNum">     367 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     368 </span>            : 
<span class="lineNum">     369 </span><span class="lineCov">        300 :     std::array&lt;StructInternalSplit, 100&gt; o_isplarray;</span>
<span class="lineNum">     370 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_isplarray)</span>
<span class="lineNum">     371 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     372 </span>            : 
<span class="lineNum">     373 </span><span class="lineCov">        300 :     std::array&lt;StructExternalSerialize, 100&gt; o_eserarray;</span>
<span class="lineNum">     374 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_eserarray)</span>
<span class="lineNum">     375 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     376 </span>            : 
<span class="lineNum">     377 </span><span class="lineCov">        300 :     std::array&lt;StructExternalSplit, 100&gt; o_esplarray;</span>
<span class="lineNum">     378 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_esplarray)</span>
<span class="lineNum">     379 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     380 </span>            : 
<span class="lineNum">     381 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">     382 </span>            :     {
<span class="lineNum">     383 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     384 </span>            : 
<span class="lineNum">     385 </span><span class="lineCov">        300 :       oar(o_podarray);</span>
<span class="lineNum">     386 </span><span class="lineCov">        300 :       oar(o_iserarray);</span>
<span class="lineNum">     387 </span><span class="lineCov">        300 :       oar(o_isplarray);</span>
<span class="lineNum">     388 </span><span class="lineCov">        300 :       oar(o_eserarray);</span>
<span class="lineNum">     389 </span><span class="lineCov">        300 :       oar(o_esplarray);</span>
<span class="lineNum">     390 </span>            :     }
<span class="lineNum">     391 </span>            : 
<span class="lineNum">     392 </span>            :     std::array&lt;int, 100&gt; i_podarray;
<span class="lineNum">     393 </span><span class="lineCov">        300 :     std::array&lt;StructInternalSerialize, 100&gt; i_iserarray;</span>
<span class="lineNum">     394 </span><span class="lineCov">        300 :     std::array&lt;StructInternalSplit, 100&gt;     i_isplarray;</span>
<span class="lineNum">     395 </span><span class="lineCov">        300 :     std::array&lt;StructExternalSerialize, 100&gt; i_eserarray;</span>
<span class="lineNum">     396 </span><span class="lineCov">        300 :     std::array&lt;StructExternalSplit, 100&gt;     i_esplarray;</span>
<span class="lineNum">     397 </span>            : 
<span class="lineNum">     398 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     399 </span>            :     {
<span class="lineNum">     400 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     401 </span>            : 
<span class="lineNum">     402 </span><span class="lineCov">        300 :       iar(i_podarray);</span>
<span class="lineNum">     403 </span><span class="lineCov">        300 :       iar(i_iserarray);</span>
<span class="lineNum">     404 </span><span class="lineCov">        300 :       iar(i_isplarray);</span>
<span class="lineNum">     405 </span><span class="lineCov">        300 :       iar(i_eserarray);</span>
<span class="lineNum">     406 </span><span class="lineCov">        300 :       iar(i_esplarray);</span>
<span class="lineNum">     407 </span>            :     }
<span class="lineNum">     408 </span>            : 
<span class="lineNum">     409 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podarray.begin(),    i_podarray.end(),    o_podarray.begin(),  o_podarray.end());</span>
<span class="lineNum">     410 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserarray.begin(),   i_iserarray.end(),   o_iserarray.begin(), o_iserarray.end());</span>
<span class="lineNum">     411 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplarray.begin(),   i_isplarray.end(),   o_isplarray.begin(), o_isplarray.end());</span>
<span class="lineNum">     412 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserarray.begin(),   i_eserarray.end(),   o_eserarray.begin(), o_eserarray.end());</span>
<span class="lineNum">     413 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplarray.begin(),   i_esplarray.end(),   o_esplarray.begin(), o_esplarray.end());</span>
<span class="lineNum">     414 </span><span class="lineCov">          3 :   }</span>
<a name="415"><span class="lineNum">     415 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     416 </span>            : 
<span class="lineNum">     417 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_array )</span>
<span class="lineNum">     418 </span>            : {
<span class="lineNum">     419 </span><span class="lineCov">          1 :   test_array&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="420"><span class="lineNum">     420 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     421 </span>            : 
<span class="lineNum">     422 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_array )</span>
<span class="lineNum">     423 </span>            : {
<span class="lineNum">     424 </span><span class="lineCov">          1 :   test_array&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="425"><span class="lineNum">     425 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     426 </span>            : 
<span class="lineNum">     427 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_array )</span>
<span class="lineNum">     428 </span>            : {
<span class="lineNum">     429 </span><span class="lineCov">          1 :   test_array&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     430 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     431 </span>            : 
<a name="432"><span class="lineNum">     432 </span>            : // ######################################################################</a>
<span class="lineNum">     433 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     434 </span><span class="lineCov">          3 : void test_deque()</span>
<span class="lineNum">     435 </span>            : {
<span class="lineNum">     436 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     437 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     438 </span>            : 
<span class="lineNum">     439 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     440 </span>            :   {
<span class="lineNum">     441 </span><span class="lineCov">        300 :     std::deque&lt;int&gt; o_poddeque(100);</span>
<span class="lineNum">     442 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_poddeque)</span>
<span class="lineNum">     443 </span><span class="lineCov">      30000 :       elem = random_value&lt;decltype(o_poddeque)::value_type&gt;(gen);</span>
<span class="lineNum">     444 </span>            : 
<span class="lineNum">     445 </span><span class="lineCov">        600 :     std::deque&lt;StructInternalSerialize&gt; o_iserdeque(100);</span>
<span class="lineNum">     446 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_iserdeque)</span>
<span class="lineNum">     447 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     448 </span>            : 
<span class="lineNum">     449 </span><span class="lineCov">        600 :     std::deque&lt;StructInternalSplit&gt; o_ispldeque(100);</span>
<span class="lineNum">     450 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_ispldeque)</span>
<span class="lineNum">     451 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     452 </span>            : 
<span class="lineNum">     453 </span><span class="lineCov">        600 :     std::deque&lt;StructExternalSerialize&gt; o_eserdeque(100);</span>
<span class="lineNum">     454 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_eserdeque)</span>
<span class="lineNum">     455 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     456 </span>            : 
<span class="lineNum">     457 </span><span class="lineCov">        600 :     std::deque&lt;StructExternalSplit&gt; o_espldeque(100);</span>
<span class="lineNum">     458 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_espldeque)</span>
<span class="lineNum">     459 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     460 </span>            : 
<span class="lineNum">     461 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     462 </span>            :     {
<span class="lineNum">     463 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     464 </span>            : 
<span class="lineNum">     465 </span><span class="lineCov">        300 :       oar(o_poddeque);</span>
<span class="lineNum">     466 </span><span class="lineCov">        300 :       oar(o_iserdeque);</span>
<span class="lineNum">     467 </span><span class="lineCov">        300 :       oar(o_ispldeque);</span>
<span class="lineNum">     468 </span><span class="lineCov">        300 :       oar(o_eserdeque);</span>
<span class="lineNum">     469 </span><span class="lineCov">        300 :       oar(o_espldeque);</span>
<span class="lineNum">     470 </span>            :     }
<span class="lineNum">     471 </span>            : 
<span class="lineNum">     472 </span><span class="lineCov">        600 :     std::deque&lt;int&gt; i_poddeque;</span>
<span class="lineNum">     473 </span><span class="lineCov">        600 :     std::deque&lt;StructInternalSerialize&gt; i_iserdeque;</span>
<span class="lineNum">     474 </span><span class="lineCov">        600 :     std::deque&lt;StructInternalSplit&gt;     i_ispldeque;</span>
<span class="lineNum">     475 </span><span class="lineCov">        600 :     std::deque&lt;StructExternalSerialize&gt; i_eserdeque;</span>
<span class="lineNum">     476 </span><span class="lineCov">        600 :     std::deque&lt;StructExternalSplit&gt;     i_espldeque;</span>
<span class="lineNum">     477 </span>            : 
<span class="lineNum">     478 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     479 </span>            :     {
<span class="lineNum">     480 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     481 </span>            : 
<span class="lineNum">     482 </span><span class="lineCov">        300 :       iar(i_poddeque);</span>
<span class="lineNum">     483 </span><span class="lineCov">        300 :       iar(i_iserdeque);</span>
<span class="lineNum">     484 </span><span class="lineCov">        300 :       iar(i_ispldeque);</span>
<span class="lineNum">     485 </span><span class="lineCov">        300 :       iar(i_eserdeque);</span>
<span class="lineNum">     486 </span><span class="lineCov">        300 :       iar(i_espldeque);</span>
<span class="lineNum">     487 </span>            :     }
<span class="lineNum">     488 </span>            : 
<span class="lineNum">     489 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_poddeque.size(),  o_poddeque.size());</span>
<span class="lineNum">     490 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_iserdeque.size(), o_iserdeque.size());</span>
<span class="lineNum">     491 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_ispldeque.size(), o_ispldeque.size());</span>
<span class="lineNum">     492 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_eserdeque.size(), o_eserdeque.size());</span>
<span class="lineNum">     493 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_espldeque.size(), o_espldeque.size());</span>
<span class="lineNum">     494 </span>            : 
<span class="lineNum">     495 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_poddeque.begin(),    i_poddeque.end(),    o_poddeque.begin(),  o_poddeque.end());</span>
<span class="lineNum">     496 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserdeque.begin(),   i_iserdeque.end(),   o_iserdeque.begin(), o_iserdeque.end());</span>
<span class="lineNum">     497 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_ispldeque.begin(),   i_ispldeque.end(),   o_ispldeque.begin(), o_ispldeque.end());</span>
<span class="lineNum">     498 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserdeque.begin(),   i_eserdeque.end(),   o_eserdeque.begin(), o_eserdeque.end());</span>
<span class="lineNum">     499 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_espldeque.begin(),   i_espldeque.end(),   o_espldeque.begin(), o_espldeque.end());</span>
<span class="lineNum">     500 </span><span class="lineCov">          3 :   }</span>
<a name="501"><span class="lineNum">     501 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     502 </span>            : 
<span class="lineNum">     503 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_dequeue )</span>
<span class="lineNum">     504 </span>            : {
<span class="lineNum">     505 </span><span class="lineCov">          1 :   test_deque&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="506"><span class="lineNum">     506 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     507 </span>            : 
<span class="lineNum">     508 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_dequeue )</span>
<span class="lineNum">     509 </span>            : {
<span class="lineNum">     510 </span><span class="lineCov">          1 :   test_deque&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="511"><span class="lineNum">     511 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     512 </span>            : 
<span class="lineNum">     513 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_dequeue )</span>
<span class="lineNum">     514 </span>            : {
<span class="lineNum">     515 </span><span class="lineCov">          1 :   test_deque&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     516 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     517 </span>            : 
<a name="518"><span class="lineNum">     518 </span>            : // ######################################################################</a>
<span class="lineNum">     519 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     520 </span><span class="lineCov">          3 : void test_forward_list()</span>
<span class="lineNum">     521 </span>            : {
<span class="lineNum">     522 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     523 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     524 </span>            : 
<span class="lineNum">     525 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     526 </span>            :   {
<span class="lineNum">     527 </span><span class="lineCov">        300 :     std::forward_list&lt;int&gt; o_podforward_list(100);</span>
<span class="lineNum">     528 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_podforward_list)</span>
<span class="lineNum">     529 </span><span class="lineCov">      30000 :       elem = random_value&lt;decltype(o_podforward_list)::value_type&gt;(gen);</span>
<span class="lineNum">     530 </span>            : 
<span class="lineNum">     531 </span><span class="lineCov">        600 :     std::forward_list&lt;StructInternalSerialize&gt; o_iserforward_list(100);</span>
<span class="lineNum">     532 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_iserforward_list)</span>
<span class="lineNum">     533 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     534 </span>            : 
<span class="lineNum">     535 </span><span class="lineCov">        600 :     std::forward_list&lt;StructInternalSplit&gt; o_isplforward_list(100);</span>
<span class="lineNum">     536 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_isplforward_list)</span>
<span class="lineNum">     537 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     538 </span>            : 
<span class="lineNum">     539 </span><span class="lineCov">        600 :     std::forward_list&lt;StructExternalSerialize&gt; o_eserforward_list(100);</span>
<span class="lineNum">     540 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_eserforward_list)</span>
<span class="lineNum">     541 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     542 </span>            : 
<span class="lineNum">     543 </span><span class="lineCov">        600 :     std::forward_list&lt;StructExternalSplit&gt; o_esplforward_list(100);</span>
<span class="lineNum">     544 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_esplforward_list)</span>
<span class="lineNum">     545 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     546 </span>            : 
<span class="lineNum">     547 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     548 </span>            :     {
<span class="lineNum">     549 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     550 </span>            : 
<span class="lineNum">     551 </span><span class="lineCov">        300 :       oar(o_podforward_list);</span>
<span class="lineNum">     552 </span><span class="lineCov">        300 :       oar(o_iserforward_list);</span>
<span class="lineNum">     553 </span><span class="lineCov">        300 :       oar(o_isplforward_list);</span>
<span class="lineNum">     554 </span><span class="lineCov">        300 :       oar(o_eserforward_list);</span>
<span class="lineNum">     555 </span><span class="lineCov">        300 :       oar(o_esplforward_list);</span>
<span class="lineNum">     556 </span>            :     }
<span class="lineNum">     557 </span>            : 
<span class="lineNum">     558 </span><span class="lineCov">        600 :     std::forward_list&lt;int&gt; i_podforward_list;</span>
<span class="lineNum">     559 </span><span class="lineCov">        600 :     std::forward_list&lt;StructInternalSerialize&gt; i_iserforward_list;</span>
<span class="lineNum">     560 </span><span class="lineCov">        600 :     std::forward_list&lt;StructInternalSplit&gt;     i_isplforward_list;</span>
<span class="lineNum">     561 </span><span class="lineCov">        600 :     std::forward_list&lt;StructExternalSerialize&gt; i_eserforward_list;</span>
<span class="lineNum">     562 </span><span class="lineCov">        600 :     std::forward_list&lt;StructExternalSplit&gt;     i_esplforward_list;</span>
<span class="lineNum">     563 </span>            : 
<span class="lineNum">     564 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     565 </span>            :     {
<span class="lineNum">     566 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     567 </span>            : 
<span class="lineNum">     568 </span><span class="lineCov">        300 :       iar(i_podforward_list);</span>
<span class="lineNum">     569 </span><span class="lineCov">        300 :       iar(i_iserforward_list);</span>
<span class="lineNum">     570 </span><span class="lineCov">        300 :       iar(i_isplforward_list);</span>
<span class="lineNum">     571 </span><span class="lineCov">        300 :       iar(i_eserforward_list);</span>
<span class="lineNum">     572 </span><span class="lineCov">        300 :       iar(i_esplforward_list);</span>
<span class="lineNum">     573 </span>            :     }
<span class="lineNum">     574 </span>            : 
<span class="lineNum">     575 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podforward_list.begin(),    i_podforward_list.end(),    o_podforward_list.begin(),  o_podforward_list.end());</span>
<span class="lineNum">     576 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserforward_list.begin(),   i_iserforward_list.end(),   o_iserforward_list.begin(), o_iserforward_list.end());</span>
<span class="lineNum">     577 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplforward_list.begin(),   i_isplforward_list.end(),   o_isplforward_list.begin(), o_isplforward_list.end());</span>
<span class="lineNum">     578 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserforward_list.begin(),   i_eserforward_list.end(),   o_eserforward_list.begin(), o_eserforward_list.end());</span>
<span class="lineNum">     579 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplforward_list.begin(),   i_esplforward_list.end(),   o_esplforward_list.begin(), o_esplforward_list.end());</span>
<span class="lineNum">     580 </span><span class="lineCov">          3 :   }</span>
<a name="581"><span class="lineNum">     581 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     582 </span>            : 
<span class="lineNum">     583 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_forward_list )</span>
<span class="lineNum">     584 </span>            : {
<span class="lineNum">     585 </span><span class="lineCov">          1 :   test_forward_list&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="586"><span class="lineNum">     586 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     587 </span>            : 
<span class="lineNum">     588 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_forward_list )</span>
<span class="lineNum">     589 </span>            : {
<span class="lineNum">     590 </span><span class="lineCov">          1 :   test_forward_list&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="591"><span class="lineNum">     591 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     592 </span>            : 
<span class="lineNum">     593 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_forward_list )</span>
<span class="lineNum">     594 </span>            : {
<span class="lineNum">     595 </span><span class="lineCov">          1 :   test_forward_list&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     596 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     597 </span>            : 
<a name="598"><span class="lineNum">     598 </span>            : // ######################################################################</a>
<span class="lineNum">     599 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     600 </span><span class="lineCov">          3 : void test_list()</span>
<span class="lineNum">     601 </span>            : {
<span class="lineNum">     602 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     603 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     604 </span>            : 
<span class="lineNum">     605 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     606 </span>            :   {
<span class="lineNum">     607 </span><span class="lineCov">        300 :     std::list&lt;int&gt; o_podlist(100);</span>
<span class="lineNum">     608 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_podlist)</span>
<span class="lineNum">     609 </span><span class="lineCov">      30000 :       elem = random_value&lt;decltype(o_podlist)::value_type&gt;(gen);</span>
<span class="lineNum">     610 </span>            : 
<span class="lineNum">     611 </span><span class="lineCov">        600 :     std::list&lt;StructInternalSerialize&gt; o_iserlist(100);</span>
<span class="lineNum">     612 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_iserlist)</span>
<span class="lineNum">     613 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     614 </span>            : 
<span class="lineNum">     615 </span><span class="lineCov">        600 :     std::list&lt;StructInternalSplit&gt; o_ispllist(100);</span>
<span class="lineNum">     616 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_ispllist)</span>
<span class="lineNum">     617 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     618 </span>            : 
<span class="lineNum">     619 </span><span class="lineCov">        600 :     std::list&lt;StructExternalSerialize&gt; o_eserlist(100);</span>
<span class="lineNum">     620 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_eserlist)</span>
<span class="lineNum">     621 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     622 </span>            : 
<span class="lineNum">     623 </span><span class="lineCov">        600 :     std::list&lt;StructExternalSplit&gt; o_espllist(100);</span>
<span class="lineNum">     624 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_espllist)</span>
<span class="lineNum">     625 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">     626 </span>            : 
<span class="lineNum">     627 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     628 </span>            :     {
<span class="lineNum">     629 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     630 </span>            : 
<span class="lineNum">     631 </span><span class="lineCov">        300 :       oar(o_podlist);</span>
<span class="lineNum">     632 </span><span class="lineCov">        300 :       oar(o_iserlist);</span>
<span class="lineNum">     633 </span><span class="lineCov">        300 :       oar(o_ispllist);</span>
<span class="lineNum">     634 </span><span class="lineCov">        300 :       oar(o_eserlist);</span>
<span class="lineNum">     635 </span><span class="lineCov">        300 :       oar(o_espllist);</span>
<span class="lineNum">     636 </span>            :     }
<span class="lineNum">     637 </span>            : 
<span class="lineNum">     638 </span><span class="lineCov">        600 :     std::list&lt;int&gt; i_podlist;</span>
<span class="lineNum">     639 </span><span class="lineCov">        600 :     std::list&lt;StructInternalSerialize&gt; i_iserlist;</span>
<span class="lineNum">     640 </span><span class="lineCov">        600 :     std::list&lt;StructInternalSplit&gt;     i_ispllist;</span>
<span class="lineNum">     641 </span><span class="lineCov">        600 :     std::list&lt;StructExternalSerialize&gt; i_eserlist;</span>
<span class="lineNum">     642 </span><span class="lineCov">        600 :     std::list&lt;StructExternalSplit&gt;     i_espllist;</span>
<span class="lineNum">     643 </span>            : 
<span class="lineNum">     644 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     645 </span>            :     {
<span class="lineNum">     646 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     647 </span>            : 
<span class="lineNum">     648 </span><span class="lineCov">        300 :       iar(i_podlist);</span>
<span class="lineNum">     649 </span><span class="lineCov">        300 :       iar(i_iserlist);</span>
<span class="lineNum">     650 </span><span class="lineCov">        300 :       iar(i_ispllist);</span>
<span class="lineNum">     651 </span><span class="lineCov">        300 :       iar(i_eserlist);</span>
<span class="lineNum">     652 </span><span class="lineCov">        300 :       iar(i_espllist);</span>
<span class="lineNum">     653 </span>            :     }
<span class="lineNum">     654 </span>            : 
<span class="lineNum">     655 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podlist.begin(),    i_podlist.end(),    o_podlist.begin(),  o_podlist.end());</span>
<span class="lineNum">     656 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserlist.begin(),   i_iserlist.end(),   o_iserlist.begin(), o_iserlist.end());</span>
<span class="lineNum">     657 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_ispllist.begin(),   i_ispllist.end(),   o_ispllist.begin(), o_ispllist.end());</span>
<span class="lineNum">     658 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserlist.begin(),   i_eserlist.end(),   o_eserlist.begin(), o_eserlist.end());</span>
<span class="lineNum">     659 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_espllist.begin(),   i_espllist.end(),   o_espllist.begin(), o_espllist.end());</span>
<span class="lineNum">     660 </span><span class="lineCov">          3 :   }</span>
<a name="661"><span class="lineNum">     661 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     662 </span>            : 
<span class="lineNum">     663 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_list )</span>
<span class="lineNum">     664 </span>            : {
<span class="lineNum">     665 </span><span class="lineCov">          1 :   test_list&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="666"><span class="lineNum">     666 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     667 </span>            : 
<span class="lineNum">     668 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_list )</span>
<span class="lineNum">     669 </span>            : {
<span class="lineNum">     670 </span><span class="lineCov">          1 :   test_list&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="671"><span class="lineNum">     671 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     672 </span>            : 
<span class="lineNum">     673 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_list )</span>
<span class="lineNum">     674 </span>            : {
<span class="lineNum">     675 </span><span class="lineCov">          1 :   test_list&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     676 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     677 </span>            : 
<a name="678"><span class="lineNum">     678 </span>            : // ######################################################################</a>
<span class="lineNum">     679 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     680 </span><span class="lineCov">          3 : void test_map()</span>
<span class="lineNum">     681 </span>            : {
<span class="lineNum">     682 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     683 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     684 </span>            : 
<span class="lineNum">     685 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     686 </span>            :   {
<span class="lineNum">     687 </span><span class="lineCov">        300 :     std::map&lt;size_t, std::vector&lt;StructInternalSerialize&gt;&gt; o_vectormap;</span>
<span class="lineNum">     688 </span><span class="lineCov">       3300 :     for(int j=0; j&lt;10; ++j)</span>
<span class="lineNum">     689 </span>            :     {
<span class="lineNum">     690 </span><span class="lineCov">       3000 :       size_t id = random_value&lt;size_t&gt;(gen);</span>
<span class="lineNum">     691 </span><span class="lineCov">     303000 :       for(int k=0; k&lt;100; ++k)</span>
<span class="lineNum">     692 </span><span class="lineCov">     300000 :         o_vectormap[id].emplace_back(random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen));</span>
<span class="lineNum">     693 </span>            :     }
<span class="lineNum">     694 </span>            : 
<span class="lineNum">     695 </span><span class="lineCov">        600 :     std::map&lt;std::string, int&gt; o_podmap;</span>
<span class="lineNum">     696 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     697 </span><span class="lineCov">      30000 :       o_podmap.insert({random_value&lt;std::string&gt;(gen), random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">     698 </span>            : 
<span class="lineNum">     699 </span><span class="lineCov">        600 :     std::map&lt;int, StructInternalSerialize&gt; o_isermap;</span>
<span class="lineNum">     700 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     701 </span><span class="lineCov">      30000 :       o_isermap.insert({random_value&lt;int&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     702 </span>            : 
<span class="lineNum">     703 </span><span class="lineCov">        600 :     std::map&lt;int, StructInternalSplit&gt; o_isplmap;</span>
<span class="lineNum">     704 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     705 </span><span class="lineCov">      30000 :       o_isplmap.insert({random_value&lt;int&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     706 </span>            : 
<span class="lineNum">     707 </span><span class="lineCov">        600 :     std::map&lt;uint32_t, StructExternalSerialize&gt; o_esermap;</span>
<span class="lineNum">     708 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     709 </span><span class="lineCov">      30000 :       o_esermap.insert({random_value&lt;uint32_t&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     710 </span>            : 
<span class="lineNum">     711 </span><span class="lineCov">        600 :     std::map&lt;int8_t, StructExternalSplit&gt; o_esplmap;</span>
<span class="lineNum">     712 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     713 </span><span class="lineCov">      30000 :       o_esplmap.insert({random_value&lt;char&gt;(gen),  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     714 </span>            : 
<span class="lineNum">     715 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     716 </span>            :     {
<span class="lineNum">     717 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     718 </span>            : 
<span class="lineNum">     719 </span><span class="lineCov">        300 :       oar(o_vectormap);</span>
<span class="lineNum">     720 </span><span class="lineCov">        300 :       oar(o_podmap);</span>
<span class="lineNum">     721 </span><span class="lineCov">        300 :       oar(o_isermap);</span>
<span class="lineNum">     722 </span><span class="lineCov">        300 :       oar(o_isplmap);</span>
<span class="lineNum">     723 </span><span class="lineCov">        300 :       oar(o_esermap);</span>
<span class="lineNum">     724 </span><span class="lineCov">        300 :       oar(o_esplmap);</span>
<span class="lineNum">     725 </span>            :     }
<span class="lineNum">     726 </span>            : 
<span class="lineNum">     727 </span><span class="lineCov">        600 :     std::map&lt;size_t, std::vector&lt;StructInternalSerialize&gt;&gt; i_vectormap;</span>
<span class="lineNum">     728 </span><span class="lineCov">        600 :     std::map&lt;std::string, int&gt; i_podmap;</span>
<span class="lineNum">     729 </span><span class="lineCov">        600 :     std::map&lt;int, StructInternalSerialize&gt;   i_isermap;</span>
<span class="lineNum">     730 </span><span class="lineCov">        600 :     std::map&lt;int, StructInternalSplit&gt;        i_isplmap;</span>
<span class="lineNum">     731 </span><span class="lineCov">        600 :     std::map&lt;uint32_t, StructExternalSerialize&gt; i_esermap;</span>
<span class="lineNum">     732 </span><span class="lineCov">        600 :     std::map&lt;int8_t, StructExternalSplit&gt;       i_esplmap;</span>
<span class="lineNum">     733 </span>            : 
<span class="lineNum">     734 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     735 </span>            :     {
<span class="lineNum">     736 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     737 </span>            : 
<span class="lineNum">     738 </span><span class="lineCov">        300 :       iar(i_vectormap);</span>
<span class="lineNum">     739 </span><span class="lineCov">        300 :       iar(i_podmap);</span>
<span class="lineNum">     740 </span><span class="lineCov">        300 :       iar(i_isermap);</span>
<span class="lineNum">     741 </span><span class="lineCov">        300 :       iar(i_isplmap);</span>
<span class="lineNum">     742 </span><span class="lineCov">        300 :       iar(i_esermap);</span>
<span class="lineNum">     743 </span><span class="lineCov">        300 :       iar(i_esplmap);</span>
<span class="lineNum">     744 </span>            :     }
<span class="lineNum">     745 </span>            : 
<span class="lineNum">     746 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_vectormap.size(), o_vectormap.size());</span>
<span class="lineNum">     747 </span><span class="lineCov">        300 :     auto o_v_it = o_vectormap.begin();</span>
<span class="lineNum">     748 </span><span class="lineCov">        300 :     auto i_v_it = i_vectormap.begin();</span>
<span class="lineNum">     749 </span><span class="lineCov">       3300 :     for(;o_v_it != o_vectormap.end(); ++o_v_it, ++i_v_it)</span>
<span class="lineNum">     750 </span>            :     {
<span class="lineNum">     751 </span><span class="lineCov">       3000 :       BOOST_CHECK_EQUAL(i_v_it-&gt;second.size(), o_v_it-&gt;second.size());</span>
<span class="lineNum">     752 </span><span class="lineCov">       3000 :       BOOST_CHECK_EQUAL_COLLECTIONS(i_v_it-&gt;second.begin(), i_v_it-&gt;second.end(), o_v_it-&gt;second.begin(), o_v_it-&gt;second.end());</span>
<span class="lineNum">     753 </span>            :     }
<span class="lineNum">     754 </span>            : 
<span class="lineNum">     755 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podmap.begin(),    i_podmap.end(),    o_podmap.begin(),  o_podmap.end());</span>
<span class="lineNum">     756 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isermap.begin(),   i_isermap.end(),   o_isermap.begin(), o_isermap.end());</span>
<span class="lineNum">     757 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplmap.begin(),   i_isplmap.end(),   o_isplmap.begin(), o_isplmap.end());</span>
<span class="lineNum">     758 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esermap.begin(),   i_esermap.end(),   o_esermap.begin(), o_esermap.end());</span>
<span class="lineNum">     759 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplmap.begin(),   i_esplmap.end(),   o_esplmap.begin(), o_esplmap.end());</span>
<span class="lineNum">     760 </span><span class="lineCov">          3 :   }</span>
<a name="761"><span class="lineNum">     761 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     762 </span>            : 
<span class="lineNum">     763 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_map )</span>
<span class="lineNum">     764 </span>            : {
<span class="lineNum">     765 </span><span class="lineCov">          1 :   test_map&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="766"><span class="lineNum">     766 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     767 </span>            : 
<span class="lineNum">     768 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_map )</span>
<span class="lineNum">     769 </span>            : {
<span class="lineNum">     770 </span><span class="lineCov">          1 :   test_map&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="771"><span class="lineNum">     771 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     772 </span>            : 
<span class="lineNum">     773 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_map )</span>
<span class="lineNum">     774 </span>            : {
<span class="lineNum">     775 </span><span class="lineCov">          1 :   test_map&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     776 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     777 </span>            : 
<a name="778"><span class="lineNum">     778 </span>            : // ######################################################################</a>
<span class="lineNum">     779 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     780 </span><span class="lineCov">          3 : void test_multimap()</span>
<span class="lineNum">     781 </span>            : {
<span class="lineNum">     782 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     783 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     784 </span>            : 
<span class="lineNum">     785 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     786 </span>            :   {
<span class="lineNum">     787 </span><span class="lineCov">        300 :     std::multimap&lt;std::string, int&gt; o_podmultimap;</span>
<span class="lineNum">     788 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     789 </span>            :     {
<span class="lineNum">     790 </span><span class="lineCov">      30000 :       auto key = random_value&lt;std::string&gt;(gen);</span>
<span class="lineNum">     791 </span><span class="lineCov">      30000 :       o_podmultimap.insert({key, random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">     792 </span><span class="lineCov">      30000 :       o_podmultimap.insert({key, random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">     793 </span>            :     }
<span class="lineNum">     794 </span>            : 
<span class="lineNum">     795 </span><span class="lineCov">        600 :     std::multimap&lt;uint8_t, StructInternalSerialize&gt; o_isermultimap;</span>
<span class="lineNum">     796 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     797 </span>            :     {
<span class="lineNum">     798 </span><span class="lineCov">      30000 :       auto key = random_value&lt;uint8_t&gt;(gen);</span>
<span class="lineNum">     799 </span><span class="lineCov">      30000 :       o_isermultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     800 </span><span class="lineCov">      30000 :       o_isermultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     801 </span>            :     }
<span class="lineNum">     802 </span>            : 
<span class="lineNum">     803 </span><span class="lineCov">        600 :     std::multimap&lt;int16_t, StructInternalSplit&gt; o_isplmultimap;</span>
<span class="lineNum">     804 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     805 </span>            :     {
<span class="lineNum">     806 </span><span class="lineCov">      30000 :       auto key = random_value&lt;int16_t&gt;(gen);</span>
<span class="lineNum">     807 </span><span class="lineCov">      30000 :       o_isplmultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     808 </span><span class="lineCov">      30000 :       o_isplmultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     809 </span>            :     }
<span class="lineNum">     810 </span>            : 
<span class="lineNum">     811 </span><span class="lineCov">        600 :     std::multimap&lt;uint32_t, StructExternalSerialize&gt; o_esermultimap;</span>
<span class="lineNum">     812 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     813 </span>            :     {
<span class="lineNum">     814 </span><span class="lineCov">      30000 :       auto key = random_value&lt;uint32_t&gt;(gen);</span>
<span class="lineNum">     815 </span><span class="lineCov">      30000 :       o_esermultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     816 </span><span class="lineCov">      30000 :       o_esermultimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     817 </span>            :     }
<span class="lineNum">     818 </span>            : 
<span class="lineNum">     819 </span><span class="lineCov">        600 :     std::multimap&lt;int8_t, StructExternalSplit&gt; o_esplmultimap;</span>
<span class="lineNum">     820 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     821 </span>            :     {
<span class="lineNum">     822 </span><span class="lineCov">      30000 :       auto key = random_value&lt;char&gt;(gen);</span>
<span class="lineNum">     823 </span><span class="lineCov">      30000 :       o_esplmultimap.insert({key,  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     824 </span><span class="lineCov">      30000 :       o_esplmultimap.insert({key,  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">     825 </span>            :     }
<span class="lineNum">     826 </span>            : 
<span class="lineNum">     827 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     828 </span>            :     {
<span class="lineNum">     829 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     830 </span>            : 
<span class="lineNum">     831 </span><span class="lineCov">        300 :       oar(o_podmultimap);</span>
<span class="lineNum">     832 </span><span class="lineCov">        300 :       oar(o_isermultimap);</span>
<span class="lineNum">     833 </span><span class="lineCov">        300 :       oar(o_isplmultimap);</span>
<span class="lineNum">     834 </span><span class="lineCov">        300 :       oar(o_esermultimap);</span>
<span class="lineNum">     835 </span><span class="lineCov">        300 :       oar(o_esplmultimap);</span>
<span class="lineNum">     836 </span>            :     }
<span class="lineNum">     837 </span>            : 
<span class="lineNum">     838 </span><span class="lineCov">        600 :     std::multimap&lt;std::string, int&gt; i_podmultimap;</span>
<span class="lineNum">     839 </span><span class="lineCov">        600 :     std::multimap&lt;uint8_t, StructInternalSerialize&gt;   i_isermultimap;</span>
<span class="lineNum">     840 </span><span class="lineCov">        600 :     std::multimap&lt;int16_t, StructInternalSplit&gt;        i_isplmultimap;</span>
<span class="lineNum">     841 </span><span class="lineCov">        600 :     std::multimap&lt;uint32_t, StructExternalSerialize&gt; i_esermultimap;</span>
<span class="lineNum">     842 </span><span class="lineCov">        600 :     std::multimap&lt;int8_t, StructExternalSplit&gt;       i_esplmultimap;</span>
<span class="lineNum">     843 </span>            : 
<span class="lineNum">     844 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     845 </span>            :     {
<span class="lineNum">     846 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     847 </span>            : 
<span class="lineNum">     848 </span><span class="lineCov">        300 :       iar(i_podmultimap);</span>
<span class="lineNum">     849 </span><span class="lineCov">        300 :       iar(i_isermultimap);</span>
<span class="lineNum">     850 </span><span class="lineCov">        300 :       iar(i_isplmultimap);</span>
<span class="lineNum">     851 </span><span class="lineCov">        300 :       iar(i_esermultimap);</span>
<span class="lineNum">     852 </span><span class="lineCov">        300 :       iar(i_esplmultimap);</span>
<span class="lineNum">     853 </span>            :     }
<span class="lineNum">     854 </span>            : 
<span class="lineNum">     855 </span>            : #define MULTIMAP_CHECK(InMap, OutMap) \
<span class="lineNum">     856 </span>            :     for( auto &amp; pair : OutMap ) \
<span class="lineNum">     857 </span>            :     { \
<span class="lineNum">     858 </span>            :       auto const count = InMap.count( pair.first ); \
<span class="lineNum">     859 </span>            :       BOOST_CHECK_EQUAL( count, OutMap.count( pair.first ) ); \
<span class="lineNum">     860 </span>            :       auto find = InMap.find( pair.first ); \
<span class="lineNum">     861 </span>            :       bool found = false; \
<span class="lineNum">     862 </span>            :       for( size_t i = 0; i &lt; count; ++i, ++find ) \
<span class="lineNum">     863 </span>            :         found |= find-&gt;second == pair.second; \
<span class="lineNum">     864 </span>            :       BOOST_CHECK( found ); \
<span class="lineNum">     865 </span>            :     }
<span class="lineNum">     866 </span>            : 
<span class="lineNum">     867 </span><span class="lineCov">        300 :     MULTIMAP_CHECK( i_podmultimap, o_podmultimap );</span>
<span class="lineNum">     868 </span><span class="lineCov">        300 :     MULTIMAP_CHECK( i_isermultimap, o_isermultimap );</span>
<span class="lineNum">     869 </span><span class="lineCov">        300 :     MULTIMAP_CHECK( i_isplmultimap, o_isplmultimap );</span>
<span class="lineNum">     870 </span><span class="lineCov">        300 :     MULTIMAP_CHECK( i_esermultimap, o_esermultimap );</span>
<span class="lineNum">     871 </span><span class="lineCov">        300 :     MULTIMAP_CHECK( i_esplmultimap, o_esplmultimap );</span>
<span class="lineNum">     872 </span>            : 
<span class="lineNum">     873 </span>            : #undef MULTIMAP_CHECK
<span class="lineNum">     874 </span><span class="lineCov">          3 :   }</span>
<a name="875"><span class="lineNum">     875 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     876 </span>            : 
<span class="lineNum">     877 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_multimap )</span>
<span class="lineNum">     878 </span>            : {
<span class="lineNum">     879 </span><span class="lineCov">          1 :   test_multimap&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="880"><span class="lineNum">     880 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     881 </span>            : 
<span class="lineNum">     882 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_multimap )</span>
<span class="lineNum">     883 </span>            : {
<span class="lineNum">     884 </span><span class="lineCov">          1 :   test_multimap&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="885"><span class="lineNum">     885 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     886 </span>            : 
<span class="lineNum">     887 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_multimap )</span>
<span class="lineNum">     888 </span>            : {
<span class="lineNum">     889 </span><span class="lineCov">          1 :   test_multimap&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     890 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     891 </span>            : 
<a name="892"><span class="lineNum">     892 </span>            : // ######################################################################</a>
<span class="lineNum">     893 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     894 </span><span class="lineCov">          3 : void test_memory()</span>
<span class="lineNum">     895 </span>            : {
<span class="lineNum">     896 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     897 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     898 </span>            : 
<span class="lineNum">     899 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     900 </span>            :   {
<span class="lineNum">     901 </span><span class="lineCov">        300 :     std::shared_ptr&lt;int&gt; o_xptr1 = std::make_shared&lt;int&gt;(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">     902 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; o_xptr2 = o_xptr1;</span>
<span class="lineNum">     903 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; o_yptr1 = std::make_shared&lt;int&gt;(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">     904 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; o_yptr2 = o_yptr1;</span>
<span class="lineNum">     905 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; o_nullptr1;</span>
<span class="lineNum">     906 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; o_nullptr2;</span>
<span class="lineNum">     907 </span>            : 
<span class="lineNum">     908 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     909 </span>            :     {
<span class="lineNum">     910 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     911 </span>            : 
<span class="lineNum">     912 </span><span class="lineCov">        300 :       oar( o_xptr1, o_xptr2 );</span>
<span class="lineNum">     913 </span><span class="lineCov">        300 :       oar( o_yptr1, o_yptr2 );</span>
<span class="lineNum">     914 </span><span class="lineCov">        300 :       oar( o_nullptr1, o_nullptr2 );</span>
<span class="lineNum">     915 </span>            :     }
<span class="lineNum">     916 </span>            : 
<span class="lineNum">     917 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_xptr1;</span>
<span class="lineNum">     918 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_xptr2;</span>
<span class="lineNum">     919 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_yptr1;</span>
<span class="lineNum">     920 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_yptr2;</span>
<span class="lineNum">     921 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_nullptr1;</span>
<span class="lineNum">     922 </span><span class="lineCov">        600 :     std::shared_ptr&lt;int&gt; i_nullptr2;</span>
<span class="lineNum">     923 </span>            : 
<span class="lineNum">     924 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">     925 </span>            :     {
<span class="lineNum">     926 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">     927 </span>            : 
<span class="lineNum">     928 </span><span class="lineCov">        300 :       iar( i_xptr1, i_xptr2);</span>
<span class="lineNum">     929 </span><span class="lineCov">        300 :       iar( i_yptr1, i_yptr2);</span>
<span class="lineNum">     930 </span><span class="lineCov">        300 :       iar( i_nullptr1, i_nullptr2 );</span>
<span class="lineNum">     931 </span>            :     }
<span class="lineNum">     932 </span>            : 
<span class="lineNum">     933 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(o_xptr1.get(), o_xptr2.get());</span>
<span class="lineNum">     934 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_xptr1.get(), i_xptr2.get());</span>
<span class="lineNum">     935 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*i_xptr1,      *i_xptr2);</span>
<span class="lineNum">     936 </span>            : 
<span class="lineNum">     937 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(o_yptr1.get(), o_yptr2.get());</span>
<span class="lineNum">     938 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_yptr1.get(), i_yptr2.get());</span>
<span class="lineNum">     939 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*i_yptr1,      *i_yptr2);</span>
<span class="lineNum">     940 </span><span class="lineCov">        300 :     BOOST_CHECK(!i_nullptr1);</span>
<span class="lineNum">     941 </span><span class="lineCov">        300 :     BOOST_CHECK(!i_nullptr2);</span>
<span class="lineNum">     942 </span><span class="lineCov">          3 :   }</span>
<a name="943"><span class="lineNum">     943 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">     944 </span>            : 
<span class="lineNum">     945 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_memory )</span>
<span class="lineNum">     946 </span>            : {
<span class="lineNum">     947 </span><span class="lineCov">          1 :   test_memory&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="948"><span class="lineNum">     948 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     949 </span>            : 
<span class="lineNum">     950 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_memory )</span>
<span class="lineNum">     951 </span>            : {
<span class="lineNum">     952 </span><span class="lineCov">          1 :   test_memory&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="953"><span class="lineNum">     953 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">     954 </span>            : 
<span class="lineNum">     955 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_memory )</span>
<span class="lineNum">     956 </span>            : {
<span class="lineNum">     957 </span><span class="lineCov">          1 :   test_memory&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">     958 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">     959 </span>            : 
<a name="960"><span class="lineNum">     960 </span>            : // ######################################################################</a>
<span class="lineNum">     961 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">     962 </span><span class="lineCov">          3 : void test_queue()</span>
<span class="lineNum">     963 </span>            : {
<span class="lineNum">     964 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">     965 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">     966 </span>            : 
<span class="lineNum">     967 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">     968 </span>            :   {
<span class="lineNum">     969 </span><span class="lineCov">        300 :     std::queue&lt;int&gt; o_podqueue;</span>
<span class="lineNum">     970 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     971 </span><span class="lineCov">      30000 :       o_podqueue.push(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">     972 </span>            : 
<span class="lineNum">     973 </span><span class="lineCov">        600 :     std::queue&lt;StructInternalSerialize&gt; o_iserqueue;</span>
<span class="lineNum">     974 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     975 </span><span class="lineCov">      30000 :       o_iserqueue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">     976 </span>            : 
<span class="lineNum">     977 </span><span class="lineCov">        600 :     std::queue&lt;StructInternalSplit&gt; o_isplqueue;</span>
<span class="lineNum">     978 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     979 </span><span class="lineCov">      30000 :       o_isplqueue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">     980 </span>            : 
<span class="lineNum">     981 </span><span class="lineCov">        600 :     std::queue&lt;StructExternalSerialize&gt; o_eserqueue;</span>
<span class="lineNum">     982 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     983 </span><span class="lineCov">      30000 :       o_eserqueue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">     984 </span>            : 
<span class="lineNum">     985 </span><span class="lineCov">        600 :     std::queue&lt;StructExternalSplit&gt; o_esplqueue;</span>
<span class="lineNum">     986 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">     987 </span><span class="lineCov">      30000 :       o_esplqueue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">     988 </span>            : 
<span class="lineNum">     989 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">     990 </span>            :     {
<span class="lineNum">     991 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">     992 </span>            : 
<span class="lineNum">     993 </span><span class="lineCov">        300 :       oar(o_podqueue);</span>
<span class="lineNum">     994 </span><span class="lineCov">        300 :       oar(o_iserqueue);</span>
<span class="lineNum">     995 </span><span class="lineCov">        300 :       oar(o_isplqueue);</span>
<span class="lineNum">     996 </span><span class="lineCov">        300 :       oar(o_eserqueue);</span>
<span class="lineNum">     997 </span><span class="lineCov">        300 :       oar(o_esplqueue);</span>
<span class="lineNum">     998 </span>            :     }
<span class="lineNum">     999 </span>            : 
<span class="lineNum">    1000 </span><span class="lineCov">        600 :     std::queue&lt;int&gt; i_podqueue;</span>
<span class="lineNum">    1001 </span><span class="lineCov">        600 :     std::queue&lt;StructInternalSerialize&gt; i_iserqueue;</span>
<span class="lineNum">    1002 </span><span class="lineCov">        600 :     std::queue&lt;StructInternalSplit&gt;     i_isplqueue;</span>
<span class="lineNum">    1003 </span><span class="lineCov">        600 :     std::queue&lt;StructExternalSerialize&gt; i_eserqueue;</span>
<span class="lineNum">    1004 </span><span class="lineCov">        600 :     std::queue&lt;StructExternalSplit&gt;     i_esplqueue;</span>
<span class="lineNum">    1005 </span>            : 
<span class="lineNum">    1006 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1007 </span>            :     {
<span class="lineNum">    1008 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1009 </span>            : 
<span class="lineNum">    1010 </span><span class="lineCov">        300 :       iar(i_podqueue);</span>
<span class="lineNum">    1011 </span><span class="lineCov">        300 :       iar(i_iserqueue);</span>
<span class="lineNum">    1012 </span><span class="lineCov">        300 :       iar(i_isplqueue);</span>
<span class="lineNum">    1013 </span><span class="lineCov">        300 :       iar(i_eserqueue);</span>
<span class="lineNum">    1014 </span><span class="lineCov">        300 :       iar(i_esplqueue);</span>
<span class="lineNum">    1015 </span>            :     }
<span class="lineNum">    1016 </span>            : 
<span class="lineNum">    1017 </span><span class="lineCov">        300 :     auto &amp; i_podqueue_c  = cereal::queue_detail::container(i_podqueue);</span>
<span class="lineNum">    1018 </span><span class="lineCov">        300 :     auto &amp; i_iserqueue_c = cereal::queue_detail::container(i_iserqueue);</span>
<span class="lineNum">    1019 </span><span class="lineCov">        300 :     auto &amp; i_isplqueue_c = cereal::queue_detail::container(i_isplqueue);</span>
<span class="lineNum">    1020 </span><span class="lineCov">        300 :     auto &amp; i_eserqueue_c = cereal::queue_detail::container(i_eserqueue);</span>
<span class="lineNum">    1021 </span><span class="lineCov">        300 :     auto &amp; i_esplqueue_c = cereal::queue_detail::container(i_esplqueue);</span>
<span class="lineNum">    1022 </span>            : 
<span class="lineNum">    1023 </span><span class="lineCov">        300 :     auto &amp; o_podqueue_c  = cereal::queue_detail::container(o_podqueue);</span>
<span class="lineNum">    1024 </span><span class="lineCov">        300 :     auto &amp; o_iserqueue_c = cereal::queue_detail::container(o_iserqueue);</span>
<span class="lineNum">    1025 </span><span class="lineCov">        300 :     auto &amp; o_isplqueue_c = cereal::queue_detail::container(o_isplqueue);</span>
<span class="lineNum">    1026 </span><span class="lineCov">        300 :     auto &amp; o_eserqueue_c = cereal::queue_detail::container(o_eserqueue);</span>
<span class="lineNum">    1027 </span><span class="lineCov">        300 :     auto &amp; o_esplqueue_c = cereal::queue_detail::container(o_esplqueue);</span>
<span class="lineNum">    1028 </span>            : 
<span class="lineNum">    1029 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podqueue_c.begin(),    i_podqueue_c.end(),    o_podqueue_c.begin(),  o_podqueue_c.end());</span>
<span class="lineNum">    1030 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserqueue_c.begin(),   i_iserqueue_c.end(),   o_iserqueue_c.begin(), o_iserqueue_c.end());</span>
<span class="lineNum">    1031 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplqueue_c.begin(),   i_isplqueue_c.end(),   o_isplqueue_c.begin(), o_isplqueue_c.end());</span>
<span class="lineNum">    1032 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserqueue_c.begin(),   i_eserqueue_c.end(),   o_eserqueue_c.begin(), o_eserqueue_c.end());</span>
<span class="lineNum">    1033 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplqueue_c.begin(),   i_esplqueue_c.end(),   o_esplqueue_c.begin(), o_esplqueue_c.end());</span>
<span class="lineNum">    1034 </span><span class="lineCov">          3 :   }</span>
<a name="1035"><span class="lineNum">    1035 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1036 </span>            : 
<span class="lineNum">    1037 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_queue )</span>
<span class="lineNum">    1038 </span>            : {
<span class="lineNum">    1039 </span><span class="lineCov">          1 :   test_queue&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1040"><span class="lineNum">    1040 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1041 </span>            : 
<span class="lineNum">    1042 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_queue )</span>
<span class="lineNum">    1043 </span>            : {
<span class="lineNum">    1044 </span><span class="lineCov">          1 :   test_queue&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1045"><span class="lineNum">    1045 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1046 </span>            : 
<span class="lineNum">    1047 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_queue )</span>
<span class="lineNum">    1048 </span>            : {
<span class="lineNum">    1049 </span><span class="lineCov">          1 :   test_queue&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1050 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1051 </span>            : 
<a name="1052"><span class="lineNum">    1052 </span>            : // ######################################################################</a>
<span class="lineNum">    1053 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1054 </span><span class="lineCov">          3 : void test_priority_queue()</span>
<span class="lineNum">    1055 </span>            : {
<span class="lineNum">    1056 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1057 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1058 </span>            : 
<span class="lineNum">    1059 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1060 </span>            :   {
<span class="lineNum">    1061 </span><span class="lineCov">        300 :     std::priority_queue&lt;int&gt; o_podpriority_queue;</span>
<span class="lineNum">    1062 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1063 </span><span class="lineCov">      30000 :       o_podpriority_queue.push(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">    1064 </span>            : 
<span class="lineNum">    1065 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructInternalSerialize&gt; o_iserpriority_queue;</span>
<span class="lineNum">    1066 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1067 </span><span class="lineCov">      30000 :       o_iserpriority_queue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1068 </span>            : 
<span class="lineNum">    1069 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructInternalSplit&gt; o_isplpriority_queue;</span>
<span class="lineNum">    1070 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1071 </span><span class="lineCov">      30000 :       o_isplpriority_queue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1072 </span>            : 
<span class="lineNum">    1073 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructExternalSerialize&gt; o_eserpriority_queue;</span>
<span class="lineNum">    1074 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1075 </span><span class="lineCov">      30000 :       o_eserpriority_queue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1076 </span>            : 
<span class="lineNum">    1077 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructExternalSplit&gt; o_esplpriority_queue;</span>
<span class="lineNum">    1078 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1079 </span><span class="lineCov">      30000 :       o_esplpriority_queue.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1080 </span>            : 
<span class="lineNum">    1081 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1082 </span>            :     {
<span class="lineNum">    1083 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1084 </span>            : 
<span class="lineNum">    1085 </span><span class="lineCov">        300 :       oar(o_podpriority_queue);</span>
<span class="lineNum">    1086 </span><span class="lineCov">        300 :       oar(o_iserpriority_queue);</span>
<span class="lineNum">    1087 </span><span class="lineCov">        300 :       oar(o_isplpriority_queue);</span>
<span class="lineNum">    1088 </span><span class="lineCov">        300 :       oar(o_eserpriority_queue);</span>
<span class="lineNum">    1089 </span><span class="lineCov">        300 :       oar(o_esplpriority_queue);</span>
<span class="lineNum">    1090 </span>            :     }
<span class="lineNum">    1091 </span>            : 
<span class="lineNum">    1092 </span><span class="lineCov">        600 :     std::priority_queue&lt;int&gt; i_podpriority_queue;</span>
<span class="lineNum">    1093 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructInternalSerialize&gt; i_iserpriority_queue;</span>
<span class="lineNum">    1094 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructInternalSplit&gt;     i_isplpriority_queue;</span>
<span class="lineNum">    1095 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructExternalSerialize&gt; i_eserpriority_queue;</span>
<span class="lineNum">    1096 </span><span class="lineCov">        600 :     std::priority_queue&lt;StructExternalSplit&gt;     i_esplpriority_queue;</span>
<span class="lineNum">    1097 </span>            : 
<span class="lineNum">    1098 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1099 </span>            :     {
<span class="lineNum">    1100 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1101 </span>            : 
<span class="lineNum">    1102 </span><span class="lineCov">        300 :       iar(i_podpriority_queue);</span>
<span class="lineNum">    1103 </span><span class="lineCov">        300 :       iar(i_iserpriority_queue);</span>
<span class="lineNum">    1104 </span><span class="lineCov">        300 :       iar(i_isplpriority_queue);</span>
<span class="lineNum">    1105 </span><span class="lineCov">        300 :       iar(i_eserpriority_queue);</span>
<span class="lineNum">    1106 </span><span class="lineCov">        300 :       iar(i_esplpriority_queue);</span>
<span class="lineNum">    1107 </span>            :     }
<span class="lineNum">    1108 </span>            : 
<span class="lineNum">    1109 </span><span class="lineCov">        300 :     auto &amp; i_podpriority_queue_c  = cereal::queue_detail::container(i_podpriority_queue);</span>
<span class="lineNum">    1110 </span><span class="lineCov">        300 :     auto &amp; i_iserpriority_queue_c = cereal::queue_detail::container(i_iserpriority_queue);</span>
<span class="lineNum">    1111 </span><span class="lineCov">        300 :     auto &amp; i_isplpriority_queue_c = cereal::queue_detail::container(i_isplpriority_queue);</span>
<span class="lineNum">    1112 </span><span class="lineCov">        300 :     auto &amp; i_eserpriority_queue_c = cereal::queue_detail::container(i_eserpriority_queue);</span>
<span class="lineNum">    1113 </span><span class="lineCov">        300 :     auto &amp; i_esplpriority_queue_c = cereal::queue_detail::container(i_esplpriority_queue);</span>
<span class="lineNum">    1114 </span>            : 
<span class="lineNum">    1115 </span><span class="lineCov">        300 :     auto &amp; o_podpriority_queue_c  = cereal::queue_detail::container(o_podpriority_queue);</span>
<span class="lineNum">    1116 </span><span class="lineCov">        300 :     auto &amp; o_iserpriority_queue_c = cereal::queue_detail::container(o_iserpriority_queue);</span>
<span class="lineNum">    1117 </span><span class="lineCov">        300 :     auto &amp; o_isplpriority_queue_c = cereal::queue_detail::container(o_isplpriority_queue);</span>
<span class="lineNum">    1118 </span><span class="lineCov">        300 :     auto &amp; o_eserpriority_queue_c = cereal::queue_detail::container(o_eserpriority_queue);</span>
<span class="lineNum">    1119 </span><span class="lineCov">        300 :     auto &amp; o_esplpriority_queue_c = cereal::queue_detail::container(o_esplpriority_queue);</span>
<span class="lineNum">    1120 </span>            : 
<span class="lineNum">    1121 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podpriority_queue_c.begin(),    i_podpriority_queue_c.end(),    o_podpriority_queue_c.begin(),  o_podpriority_queue_c.end());</span>
<span class="lineNum">    1122 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserpriority_queue_c.begin(),   i_iserpriority_queue_c.end(),   o_iserpriority_queue_c.begin(), o_iserpriority_queue_c.end());</span>
<span class="lineNum">    1123 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplpriority_queue_c.begin(),   i_isplpriority_queue_c.end(),   o_isplpriority_queue_c.begin(), o_isplpriority_queue_c.end());</span>
<span class="lineNum">    1124 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserpriority_queue_c.begin(),   i_eserpriority_queue_c.end(),   o_eserpriority_queue_c.begin(), o_eserpriority_queue_c.end());</span>
<span class="lineNum">    1125 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplpriority_queue_c.begin(),   i_esplpriority_queue_c.end(),   o_esplpriority_queue_c.begin(), o_esplpriority_queue_c.end());</span>
<span class="lineNum">    1126 </span><span class="lineCov">          3 :   }</span>
<a name="1127"><span class="lineNum">    1127 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1128 </span>            : 
<span class="lineNum">    1129 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_priority_queue )</span>
<span class="lineNum">    1130 </span>            : {
<span class="lineNum">    1131 </span><span class="lineCov">          1 :   test_priority_queue&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1132"><span class="lineNum">    1132 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1133 </span>            : 
<span class="lineNum">    1134 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_priority_queue )</span>
<span class="lineNum">    1135 </span>            : {
<span class="lineNum">    1136 </span><span class="lineCov">          1 :   test_priority_queue&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1137"><span class="lineNum">    1137 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1138 </span>            : 
<span class="lineNum">    1139 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_priority_queue )</span>
<span class="lineNum">    1140 </span>            : {
<span class="lineNum">    1141 </span><span class="lineCov">          1 :   test_priority_queue&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1142 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1143 </span>            : 
<a name="1144"><span class="lineNum">    1144 </span>            : // ######################################################################</a>
<span class="lineNum">    1145 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1146 </span><span class="lineCov">          3 : void test_set()</span>
<span class="lineNum">    1147 </span>            : {
<span class="lineNum">    1148 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1149 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1150 </span>            : 
<span class="lineNum">    1151 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1152 </span>            :   {
<span class="lineNum">    1153 </span><span class="lineCov">        300 :     std::set&lt;int&gt; o_podset;</span>
<span class="lineNum">    1154 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1155 </span><span class="lineCov">      30000 :       o_podset.insert(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">    1156 </span>            : 
<span class="lineNum">    1157 </span><span class="lineCov">        600 :     std::set&lt;StructInternalSerialize&gt; o_iserset;</span>
<span class="lineNum">    1158 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1159 </span><span class="lineCov">      30000 :       o_iserset.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1160 </span>            : 
<span class="lineNum">    1161 </span><span class="lineCov">        600 :     std::set&lt;StructInternalSplit&gt; o_isplset;</span>
<span class="lineNum">    1162 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1163 </span><span class="lineCov">      30000 :       o_isplset.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1164 </span>            : 
<span class="lineNum">    1165 </span><span class="lineCov">        600 :     std::set&lt;StructExternalSerialize&gt; o_eserset;</span>
<span class="lineNum">    1166 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1167 </span><span class="lineCov">      30000 :       o_eserset.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1168 </span>            : 
<span class="lineNum">    1169 </span><span class="lineCov">        600 :     std::set&lt;StructExternalSplit&gt; o_esplset;</span>
<span class="lineNum">    1170 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1171 </span><span class="lineCov">      30000 :       o_esplset.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1172 </span>            : 
<span class="lineNum">    1173 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1174 </span>            :     {
<span class="lineNum">    1175 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1176 </span>            : 
<span class="lineNum">    1177 </span><span class="lineCov">        300 :       oar(o_podset);</span>
<span class="lineNum">    1178 </span><span class="lineCov">        300 :       oar(o_iserset);</span>
<span class="lineNum">    1179 </span><span class="lineCov">        300 :       oar(o_isplset);</span>
<span class="lineNum">    1180 </span><span class="lineCov">        300 :       oar(o_eserset);</span>
<span class="lineNum">    1181 </span><span class="lineCov">        300 :       oar(o_esplset);</span>
<span class="lineNum">    1182 </span>            :     }
<span class="lineNum">    1183 </span>            : 
<span class="lineNum">    1184 </span><span class="lineCov">        600 :     std::set&lt;int&gt; i_podset;</span>
<span class="lineNum">    1185 </span><span class="lineCov">        600 :     std::set&lt;StructInternalSerialize&gt;   i_iserset;</span>
<span class="lineNum">    1186 </span><span class="lineCov">        600 :     std::set&lt;StructInternalSplit&gt;        i_isplset;</span>
<span class="lineNum">    1187 </span><span class="lineCov">        600 :     std::set&lt;StructExternalSerialize&gt; i_eserset;</span>
<span class="lineNum">    1188 </span><span class="lineCov">        600 :     std::set&lt;StructExternalSplit&gt;       i_esplset;</span>
<span class="lineNum">    1189 </span>            : 
<span class="lineNum">    1190 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1191 </span>            :     {
<span class="lineNum">    1192 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1193 </span>            : 
<span class="lineNum">    1194 </span><span class="lineCov">        300 :       iar(i_podset);</span>
<span class="lineNum">    1195 </span><span class="lineCov">        300 :       iar(i_iserset);</span>
<span class="lineNum">    1196 </span><span class="lineCov">        300 :       iar(i_isplset);</span>
<span class="lineNum">    1197 </span><span class="lineCov">        300 :       iar(i_eserset);</span>
<span class="lineNum">    1198 </span><span class="lineCov">        300 :       iar(i_esplset);</span>
<span class="lineNum">    1199 </span>            :     }
<span class="lineNum">    1200 </span>            : 
<span class="lineNum">    1201 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podset.begin(),    i_podset.end(),    o_podset.begin(),  o_podset.end());</span>
<span class="lineNum">    1202 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserset.begin(),   i_iserset.end(),   o_iserset.begin(), o_iserset.end());</span>
<span class="lineNum">    1203 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplset.begin(),   i_isplset.end(),   o_isplset.begin(), o_isplset.end());</span>
<span class="lineNum">    1204 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserset.begin(),   i_eserset.end(),   o_eserset.begin(), o_eserset.end());</span>
<span class="lineNum">    1205 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplset.begin(),   i_esplset.end(),   o_esplset.begin(), o_esplset.end());</span>
<span class="lineNum">    1206 </span><span class="lineCov">          3 :   }</span>
<a name="1207"><span class="lineNum">    1207 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1208 </span>            : 
<span class="lineNum">    1209 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_set )</span>
<span class="lineNum">    1210 </span>            : {
<span class="lineNum">    1211 </span><span class="lineCov">          1 :   test_set&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1212"><span class="lineNum">    1212 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1213 </span>            : 
<span class="lineNum">    1214 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_set )</span>
<span class="lineNum">    1215 </span>            : {
<span class="lineNum">    1216 </span><span class="lineCov">          1 :   test_set&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1217"><span class="lineNum">    1217 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1218 </span>            : 
<span class="lineNum">    1219 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_set )</span>
<span class="lineNum">    1220 </span>            : {
<span class="lineNum">    1221 </span><span class="lineCov">          1 :   test_set&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1222 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1223 </span>            : 
<a name="1224"><span class="lineNum">    1224 </span>            : // ######################################################################</a>
<span class="lineNum">    1225 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1226 </span><span class="lineCov">          3 : void test_multiset()</span>
<span class="lineNum">    1227 </span>            : {
<span class="lineNum">    1228 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1229 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1230 </span>            : 
<span class="lineNum">    1231 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1232 </span>            :   {
<span class="lineNum">    1233 </span><span class="lineCov">        300 :     std::multiset&lt;int&gt; o_podmultiset;</span>
<span class="lineNum">    1234 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1235 </span>            :     {
<span class="lineNum">    1236 </span><span class="lineCov">      30000 :       int value = random_value&lt;int&gt;(gen);</span>
<span class="lineNum">    1237 </span><span class="lineCov">      30000 :       o_podmultiset.insert(value);</span>
<span class="lineNum">    1238 </span><span class="lineCov">      30000 :       o_podmultiset.insert(value);</span>
<span class="lineNum">    1239 </span>            :     }
<span class="lineNum">    1240 </span>            : 
<span class="lineNum">    1241 </span><span class="lineCov">        600 :     std::multiset&lt;StructInternalSerialize&gt; o_isermultiset;</span>
<span class="lineNum">    1242 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1243 </span>            :     {
<span class="lineNum">    1244 </span><span class="lineCov">      30000 :       StructInternalSerialize value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1245 </span><span class="lineCov">      30000 :       o_isermultiset.insert(value);</span>
<span class="lineNum">    1246 </span><span class="lineCov">      30000 :       o_isermultiset.insert(value);</span>
<span class="lineNum">    1247 </span>            :     }
<span class="lineNum">    1248 </span>            : 
<span class="lineNum">    1249 </span><span class="lineCov">        600 :     std::multiset&lt;StructInternalSplit&gt; o_isplmultiset;</span>
<span class="lineNum">    1250 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1251 </span>            :     {
<span class="lineNum">    1252 </span><span class="lineCov">      30000 :       StructInternalSplit value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1253 </span><span class="lineCov">      30000 :       o_isplmultiset.insert(value);</span>
<span class="lineNum">    1254 </span><span class="lineCov">      30000 :       o_isplmultiset.insert(value);</span>
<span class="lineNum">    1255 </span>            :     }
<span class="lineNum">    1256 </span>            : 
<span class="lineNum">    1257 </span><span class="lineCov">        600 :     std::multiset&lt;StructExternalSerialize&gt; o_esermultiset;</span>
<span class="lineNum">    1258 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1259 </span>            :     {
<span class="lineNum">    1260 </span><span class="lineCov">      30000 :       StructExternalSerialize value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1261 </span><span class="lineCov">      30000 :       o_esermultiset.insert(value);</span>
<span class="lineNum">    1262 </span><span class="lineCov">      30000 :       o_esermultiset.insert(value);</span>
<span class="lineNum">    1263 </span>            :     }
<span class="lineNum">    1264 </span>            : 
<span class="lineNum">    1265 </span><span class="lineCov">        600 :     std::multiset&lt;StructExternalSplit&gt; o_esplmultiset;</span>
<span class="lineNum">    1266 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1267 </span>            :     {
<span class="lineNum">    1268 </span><span class="lineCov">      30000 :       StructExternalSplit value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1269 </span><span class="lineCov">      30000 :       o_esplmultiset.insert(value);</span>
<span class="lineNum">    1270 </span><span class="lineCov">      30000 :       o_esplmultiset.insert(value);</span>
<span class="lineNum">    1271 </span>            :     }
<span class="lineNum">    1272 </span>            : 
<span class="lineNum">    1273 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1274 </span>            :     {
<span class="lineNum">    1275 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1276 </span>            : 
<span class="lineNum">    1277 </span><span class="lineCov">        300 :       oar(o_podmultiset);</span>
<span class="lineNum">    1278 </span><span class="lineCov">        300 :       oar(o_isermultiset);</span>
<span class="lineNum">    1279 </span><span class="lineCov">        300 :       oar(o_isplmultiset);</span>
<span class="lineNum">    1280 </span><span class="lineCov">        300 :       oar(o_esermultiset);</span>
<span class="lineNum">    1281 </span><span class="lineCov">        300 :       oar(o_esplmultiset);</span>
<span class="lineNum">    1282 </span>            :     }
<span class="lineNum">    1283 </span>            : 
<span class="lineNum">    1284 </span><span class="lineCov">        600 :     std::multiset&lt;int&gt; i_podmultiset;</span>
<span class="lineNum">    1285 </span><span class="lineCov">        600 :     std::multiset&lt;StructInternalSerialize&gt; i_isermultiset;</span>
<span class="lineNum">    1286 </span><span class="lineCov">        600 :     std::multiset&lt;StructInternalSplit&gt;     i_isplmultiset;</span>
<span class="lineNum">    1287 </span><span class="lineCov">        600 :     std::multiset&lt;StructExternalSerialize&gt; i_esermultiset;</span>
<span class="lineNum">    1288 </span><span class="lineCov">        600 :     std::multiset&lt;StructExternalSplit&gt;     i_esplmultiset;</span>
<span class="lineNum">    1289 </span>            : 
<span class="lineNum">    1290 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1291 </span>            :     {
<span class="lineNum">    1292 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1293 </span>            : 
<span class="lineNum">    1294 </span><span class="lineCov">        300 :       iar(i_podmultiset);</span>
<span class="lineNum">    1295 </span><span class="lineCov">        300 :       iar(i_isermultiset);</span>
<span class="lineNum">    1296 </span><span class="lineCov">        300 :       iar(i_isplmultiset);</span>
<span class="lineNum">    1297 </span><span class="lineCov">        300 :       iar(i_esermultiset);</span>
<span class="lineNum">    1298 </span><span class="lineCov">        300 :       iar(i_esplmultiset);</span>
<span class="lineNum">    1299 </span>            :     }
<span class="lineNum">    1300 </span>            : 
<span class="lineNum">    1301 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_podmultiset)</span>
<span class="lineNum">    1302 </span>            :     {
<span class="lineNum">    1303 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_podmultiset.count(p), i_podmultiset.count(p));</span>
<span class="lineNum">    1304 </span>            :     }
<span class="lineNum">    1305 </span>            : 
<span class="lineNum">    1306 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_isermultiset)</span>
<span class="lineNum">    1307 </span>            :     {
<span class="lineNum">    1308 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_isermultiset.count(p), i_isermultiset.count(p));</span>
<span class="lineNum">    1309 </span>            :     }
<span class="lineNum">    1310 </span>            : 
<span class="lineNum">    1311 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_isplmultiset)</span>
<span class="lineNum">    1312 </span>            :     {
<span class="lineNum">    1313 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_isplmultiset.count(p), i_isplmultiset.count(p));</span>
<span class="lineNum">    1314 </span>            :     }
<span class="lineNum">    1315 </span>            : 
<span class="lineNum">    1316 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_esermultiset)</span>
<span class="lineNum">    1317 </span>            :     {
<span class="lineNum">    1318 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_esermultiset.count(p), i_esermultiset.count(p));</span>
<span class="lineNum">    1319 </span>            :     }
<span class="lineNum">    1320 </span>            : 
<span class="lineNum">    1321 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_esplmultiset)</span>
<span class="lineNum">    1322 </span>            :     {
<span class="lineNum">    1323 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_esplmultiset.count(p), i_esplmultiset.count(p));</span>
<span class="lineNum">    1324 </span>            :     }
<span class="lineNum">    1325 </span><span class="lineCov">          3 :   }</span>
<a name="1326"><span class="lineNum">    1326 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1327 </span>            : 
<span class="lineNum">    1328 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_multiset )</span>
<span class="lineNum">    1329 </span>            : {
<span class="lineNum">    1330 </span><span class="lineCov">          1 :   test_multiset&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1331"><span class="lineNum">    1331 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1332 </span>            : 
<span class="lineNum">    1333 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_multiset )</span>
<span class="lineNum">    1334 </span>            : {
<span class="lineNum">    1335 </span><span class="lineCov">          1 :   test_multiset&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1336"><span class="lineNum">    1336 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1337 </span>            : 
<span class="lineNum">    1338 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_multiset )</span>
<span class="lineNum">    1339 </span>            : {
<span class="lineNum">    1340 </span><span class="lineCov">          1 :   test_multiset&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1341 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1342 </span>            : 
<a name="1343"><span class="lineNum">    1343 </span>            : // ######################################################################</a>
<span class="lineNum">    1344 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1345 </span><span class="lineCov">          3 : void test_stack()</span>
<span class="lineNum">    1346 </span>            : {
<span class="lineNum">    1347 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1348 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1349 </span>            : 
<span class="lineNum">    1350 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1351 </span>            :   {
<span class="lineNum">    1352 </span><span class="lineCov">        300 :     std::stack&lt;int&gt; o_podstack;</span>
<span class="lineNum">    1353 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1354 </span><span class="lineCov">      30000 :       o_podstack.push(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">    1355 </span>            : 
<span class="lineNum">    1356 </span><span class="lineCov">        600 :     std::stack&lt;StructInternalSerialize&gt; o_iserstack;</span>
<span class="lineNum">    1357 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1358 </span><span class="lineCov">      30000 :       o_iserstack.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1359 </span>            : 
<span class="lineNum">    1360 </span><span class="lineCov">        600 :     std::stack&lt;StructInternalSplit&gt; o_isplstack;</span>
<span class="lineNum">    1361 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1362 </span><span class="lineCov">      30000 :       o_isplstack.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1363 </span>            : 
<span class="lineNum">    1364 </span><span class="lineCov">        600 :     std::stack&lt;StructExternalSerialize&gt; o_eserstack;</span>
<span class="lineNum">    1365 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1366 </span><span class="lineCov">      30000 :       o_eserstack.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1367 </span>            : 
<span class="lineNum">    1368 </span><span class="lineCov">        600 :     std::stack&lt;StructExternalSplit&gt; o_esplstack;</span>
<span class="lineNum">    1369 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1370 </span><span class="lineCov">      30000 :       o_esplstack.push({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1371 </span>            : 
<span class="lineNum">    1372 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1373 </span>            :     {
<span class="lineNum">    1374 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1375 </span>            : 
<span class="lineNum">    1376 </span><span class="lineCov">        300 :       oar(o_podstack);</span>
<span class="lineNum">    1377 </span><span class="lineCov">        300 :       oar(o_iserstack);</span>
<span class="lineNum">    1378 </span><span class="lineCov">        300 :       oar(o_isplstack);</span>
<span class="lineNum">    1379 </span><span class="lineCov">        300 :       oar(o_eserstack);</span>
<span class="lineNum">    1380 </span><span class="lineCov">        300 :       oar(o_esplstack);</span>
<span class="lineNum">    1381 </span>            :     }
<span class="lineNum">    1382 </span>            : 
<span class="lineNum">    1383 </span><span class="lineCov">        600 :     std::stack&lt;int&gt; i_podstack;</span>
<span class="lineNum">    1384 </span><span class="lineCov">        600 :     std::stack&lt;StructInternalSerialize&gt; i_iserstack;</span>
<span class="lineNum">    1385 </span><span class="lineCov">        600 :     std::stack&lt;StructInternalSplit&gt;     i_isplstack;</span>
<span class="lineNum">    1386 </span><span class="lineCov">        600 :     std::stack&lt;StructExternalSerialize&gt; i_eserstack;</span>
<span class="lineNum">    1387 </span><span class="lineCov">        600 :     std::stack&lt;StructExternalSplit&gt;     i_esplstack;</span>
<span class="lineNum">    1388 </span>            : 
<span class="lineNum">    1389 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1390 </span>            :     {
<span class="lineNum">    1391 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1392 </span>            : 
<span class="lineNum">    1393 </span><span class="lineCov">        300 :       iar(i_podstack);</span>
<span class="lineNum">    1394 </span><span class="lineCov">        300 :       iar(i_iserstack);</span>
<span class="lineNum">    1395 </span><span class="lineCov">        300 :       iar(i_isplstack);</span>
<span class="lineNum">    1396 </span><span class="lineCov">        300 :       iar(i_eserstack);</span>
<span class="lineNum">    1397 </span><span class="lineCov">        300 :       iar(i_esplstack);</span>
<span class="lineNum">    1398 </span>            :     }
<span class="lineNum">    1399 </span>            : 
<span class="lineNum">    1400 </span><span class="lineCov">        300 :     auto &amp; i_podstack_c  = cereal::stack_detail::container(i_podstack);</span>
<span class="lineNum">    1401 </span><span class="lineCov">        300 :     auto &amp; i_iserstack_c = cereal::stack_detail::container(i_iserstack);</span>
<span class="lineNum">    1402 </span><span class="lineCov">        300 :     auto &amp; i_isplstack_c = cereal::stack_detail::container(i_isplstack);</span>
<span class="lineNum">    1403 </span><span class="lineCov">        300 :     auto &amp; i_eserstack_c = cereal::stack_detail::container(i_eserstack);</span>
<span class="lineNum">    1404 </span><span class="lineCov">        300 :     auto &amp; i_esplstack_c = cereal::stack_detail::container(i_esplstack);</span>
<span class="lineNum">    1405 </span>            : 
<span class="lineNum">    1406 </span><span class="lineCov">        300 :     auto &amp; o_podstack_c  = cereal::stack_detail::container(o_podstack);</span>
<span class="lineNum">    1407 </span><span class="lineCov">        300 :     auto &amp; o_iserstack_c = cereal::stack_detail::container(o_iserstack);</span>
<span class="lineNum">    1408 </span><span class="lineCov">        300 :     auto &amp; o_isplstack_c = cereal::stack_detail::container(o_isplstack);</span>
<span class="lineNum">    1409 </span><span class="lineCov">        300 :     auto &amp; o_eserstack_c = cereal::stack_detail::container(o_eserstack);</span>
<span class="lineNum">    1410 </span><span class="lineCov">        300 :     auto &amp; o_esplstack_c = cereal::stack_detail::container(o_esplstack);</span>
<span class="lineNum">    1411 </span>            : 
<span class="lineNum">    1412 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podstack_c.begin(),    i_podstack_c.end(),    o_podstack_c.begin(),  o_podstack_c.end());</span>
<span class="lineNum">    1413 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iserstack_c.begin(),   i_iserstack_c.end(),   o_iserstack_c.begin(), o_iserstack_c.end());</span>
<span class="lineNum">    1414 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplstack_c.begin(),   i_isplstack_c.end(),   o_isplstack_c.begin(), o_isplstack_c.end());</span>
<span class="lineNum">    1415 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eserstack_c.begin(),   i_eserstack_c.end(),   o_eserstack_c.begin(), o_eserstack_c.end());</span>
<span class="lineNum">    1416 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplstack_c.begin(),   i_esplstack_c.end(),   o_esplstack_c.begin(), o_esplstack_c.end());</span>
<span class="lineNum">    1417 </span><span class="lineCov">          3 :   }</span>
<a name="1418"><span class="lineNum">    1418 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1419 </span>            : 
<span class="lineNum">    1420 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_stack )</span>
<span class="lineNum">    1421 </span>            : {
<span class="lineNum">    1422 </span><span class="lineCov">          1 :   test_stack&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1423"><span class="lineNum">    1423 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1424 </span>            : 
<span class="lineNum">    1425 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_stack )</span>
<span class="lineNum">    1426 </span>            : {
<span class="lineNum">    1427 </span><span class="lineCov">          1 :   test_stack&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1428"><span class="lineNum">    1428 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1429 </span>            : 
<span class="lineNum">    1430 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_stack )</span>
<span class="lineNum">    1431 </span>            : {
<span class="lineNum">    1432 </span><span class="lineCov">          1 :   test_stack&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1433 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1434 </span>            : 
<a name="1435"><span class="lineNum">    1435 </span>            : // ######################################################################</a>
<span class="lineNum">    1436 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1437 </span><span class="lineCov">          2 : void test_string_basic()</span>
<span class="lineNum">    1438 </span>            : {
<span class="lineNum">    1439 </span><span class="lineCov">          2 :   std::random_device rd;</span>
<span class="lineNum">    1440 </span><span class="lineCov">          2 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1441 </span>            : 
<span class="lineNum">    1442 </span><span class="lineCov">        202 :   for(size_t i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1443 </span>            :   {
<span class="lineNum">    1444 </span><span class="lineCov">        200 :     std::basic_string&lt;char&gt; o_string        = random_basic_string&lt;char&gt;(gen);</span>
<span class="lineNum">    1445 </span>            : 
<span class="lineNum">    1446 </span><span class="lineCov">        400 :     std::ostringstream os;</span>
<span class="lineNum">    1447 </span>            :     {
<span class="lineNum">    1448 </span><span class="lineCov">        200 :       OArchive oar(os);</span>
<span class="lineNum">    1449 </span><span class="lineCov">        200 :       oar(o_string);</span>
<span class="lineNum">    1450 </span>            :     }
<span class="lineNum">    1451 </span>            : 
<span class="lineNum">    1452 </span><span class="lineCov">        400 :     std::basic_string&lt;char&gt; i_string;</span>
<span class="lineNum">    1453 </span>            : 
<span class="lineNum">    1454 </span><span class="lineCov">        400 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1455 </span>            :     {
<span class="lineNum">    1456 </span><span class="lineCov">        200 :       IArchive iar(is);</span>
<span class="lineNum">    1457 </span>            : 
<span class="lineNum">    1458 </span><span class="lineCov">        200 :       iar(i_string);</span>
<span class="lineNum">    1459 </span>            :     }
<span class="lineNum">    1460 </span>            : 
<span class="lineNum">    1461 </span><span class="lineCov">        200 :     BOOST_CHECK_EQUAL(i_string, o_string);</span>
<span class="lineNum">    1462 </span><span class="lineCov">          2 :   }</span>
<span class="lineNum">    1463 </span><span class="lineCov">          2 : }</span>
<a name="1464"><span class="lineNum">    1464 </span>            : </a>
<span class="lineNum">    1465 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1466 </span><span class="lineCov">          1 : void test_string_all()</span>
<span class="lineNum">    1467 </span>            : {
<span class="lineNum">    1468 </span><span class="lineCov">          1 :   std::random_device rd;</span>
<span class="lineNum">    1469 </span><span class="lineCov">          1 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1470 </span>            : 
<span class="lineNum">    1471 </span><span class="lineCov">        101 :   for(size_t i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1472 </span>            :   {
<span class="lineNum">    1473 </span><span class="lineCov">        100 :     std::basic_string&lt;char&gt; o_string        = random_basic_string&lt;char&gt;(gen);</span>
<span class="lineNum">    1474 </span><span class="lineCov">        200 :     std::basic_string&lt;wchar_t&gt; o_wstring    = random_basic_string&lt;wchar_t&gt;(gen);</span>
<span class="lineNum">    1475 </span><span class="lineCov">        200 :     std::basic_string&lt;char16_t&gt; o_u16string = random_basic_string&lt;char16_t&gt;(gen);</span>
<span class="lineNum">    1476 </span><span class="lineCov">        200 :     std::basic_string&lt;char32_t&gt; o_u32string = random_basic_string&lt;char32_t&gt;(gen);</span>
<span class="lineNum">    1477 </span>            : 
<span class="lineNum">    1478 </span><span class="lineCov">        200 :     std::ostringstream os;</span>
<span class="lineNum">    1479 </span>            :     {
<span class="lineNum">    1480 </span><span class="lineCov">        100 :       OArchive oar(os);</span>
<span class="lineNum">    1481 </span><span class="lineCov">        100 :       oar(o_string);</span>
<span class="lineNum">    1482 </span><span class="lineCov">        100 :       oar(o_wstring);</span>
<span class="lineNum">    1483 </span><span class="lineCov">        100 :       oar(o_u16string);</span>
<span class="lineNum">    1484 </span><span class="lineCov">        100 :       oar(o_u32string);</span>
<span class="lineNum">    1485 </span>            :     }
<span class="lineNum">    1486 </span>            : 
<span class="lineNum">    1487 </span><span class="lineCov">        200 :     std::basic_string&lt;char&gt; i_string;</span>
<span class="lineNum">    1488 </span><span class="lineCov">        200 :     std::basic_string&lt;wchar_t&gt; i_wstring;</span>
<span class="lineNum">    1489 </span><span class="lineCov">        200 :     std::basic_string&lt;char16_t&gt; i_u16string;</span>
<span class="lineNum">    1490 </span><span class="lineCov">        200 :     std::basic_string&lt;char32_t&gt; i_u32string;</span>
<span class="lineNum">    1491 </span>            : 
<span class="lineNum">    1492 </span><span class="lineCov">        200 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1493 </span>            :     {
<span class="lineNum">    1494 </span><span class="lineCov">        100 :       IArchive iar(is);</span>
<span class="lineNum">    1495 </span>            : 
<span class="lineNum">    1496 </span><span class="lineCov">        100 :       iar(i_string);</span>
<span class="lineNum">    1497 </span><span class="lineCov">        100 :       iar(i_wstring);</span>
<span class="lineNum">    1498 </span><span class="lineCov">        100 :       iar(i_u16string);</span>
<span class="lineNum">    1499 </span><span class="lineCov">        100 :       iar(i_u32string);</span>
<span class="lineNum">    1500 </span>            :     }
<span class="lineNum">    1501 </span>            : 
<span class="lineNum">    1502 </span><span class="lineCov">        100 :     BOOST_CHECK_EQUAL(i_string, o_string);</span>
<span class="lineNum">    1503 </span><span class="lineCov">        100 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_wstring.begin(),     i_wstring.end(),   o_wstring.begin(),   o_wstring.end());</span>
<span class="lineNum">    1504 </span><span class="lineCov">        100 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_u16string.begin(),  i_u16string.end(),  o_u16string.begin(), o_u16string.end());</span>
<span class="lineNum">    1505 </span><span class="lineCov">        100 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_u32string.begin(),  i_u32string.end(),  o_u32string.begin(), o_u32string.end());</span>
<span class="lineNum">    1506 </span><span class="lineCov">          1 :   }</span>
<a name="1507"><span class="lineNum">    1507 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1508 </span>            : 
<span class="lineNum">    1509 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_string )</span>
<span class="lineNum">    1510 </span>            : {
<span class="lineNum">    1511 </span><span class="lineCov">          1 :   test_string_all&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1512"><span class="lineNum">    1512 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1513 </span>            : 
<span class="lineNum">    1514 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_string_basic )</span>
<span class="lineNum">    1515 </span>            : {
<span class="lineNum">    1516 </span><span class="lineCov">          1 :   test_string_basic&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1517"><span class="lineNum">    1517 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1518 </span>            : 
<span class="lineNum">    1519 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_string_basic )</span>
<span class="lineNum">    1520 </span>            : {
<span class="lineNum">    1521 </span><span class="lineCov">          1 :   test_string_basic&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1522 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1523 </span>            : 
<a name="1524"><span class="lineNum">    1524 </span>            : // ######################################################################</a>
<span class="lineNum">    1525 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1526 </span><span class="lineCov">          3 : void test_unordered_map()</span>
<span class="lineNum">    1527 </span>            : {
<span class="lineNum">    1528 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1529 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1530 </span>            : 
<span class="lineNum">    1531 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1532 </span>            :   {
<span class="lineNum">    1533 </span><span class="lineCov">        300 :     std::unordered_map&lt;std::string, int&gt; o_podunordered_map;</span>
<span class="lineNum">    1534 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1535 </span><span class="lineCov">      30000 :       o_podunordered_map.insert({random_value&lt;std::string&gt;(gen), random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">    1536 </span>            : 
<span class="lineNum">    1537 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint16_t, StructInternalSerialize&gt; o_iserunordered_map;</span>
<span class="lineNum">    1538 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1539 </span><span class="lineCov">      30000 :       o_iserunordered_map.insert({random_value&lt;uint16_t&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1540 </span>            : 
<span class="lineNum">    1541 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint16_t, StructInternalSplit&gt; o_isplunordered_map;</span>
<span class="lineNum">    1542 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1543 </span><span class="lineCov">      30000 :       o_isplunordered_map.insert({random_value&lt;uint16_t&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1544 </span>            : 
<span class="lineNum">    1545 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint32_t, StructExternalSerialize&gt; o_eserunordered_map;</span>
<span class="lineNum">    1546 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1547 </span><span class="lineCov">      30000 :       o_eserunordered_map.insert({random_value&lt;uint32_t&gt;(gen), { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1548 </span>            : 
<span class="lineNum">    1549 </span><span class="lineCov">        600 :     std::unordered_map&lt;int8_t, StructExternalSplit&gt; o_esplunordered_map;</span>
<span class="lineNum">    1550 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1551 </span><span class="lineCov">      30000 :       o_esplunordered_map.insert({random_value&lt;char&gt;(gen),  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1552 </span>            : 
<span class="lineNum">    1553 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1554 </span>            :     {
<span class="lineNum">    1555 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1556 </span>            : 
<span class="lineNum">    1557 </span><span class="lineCov">        300 :       oar(o_podunordered_map);</span>
<span class="lineNum">    1558 </span><span class="lineCov">        300 :       oar(o_iserunordered_map);</span>
<span class="lineNum">    1559 </span><span class="lineCov">        300 :       oar(o_isplunordered_map);</span>
<span class="lineNum">    1560 </span><span class="lineCov">        300 :       oar(o_eserunordered_map);</span>
<span class="lineNum">    1561 </span><span class="lineCov">        300 :       oar(o_esplunordered_map);</span>
<span class="lineNum">    1562 </span>            :     }
<span class="lineNum">    1563 </span>            : 
<span class="lineNum">    1564 </span><span class="lineCov">        600 :     std::unordered_map&lt;std::string, int&gt; i_podunordered_map;</span>
<span class="lineNum">    1565 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint16_t, StructInternalSerialize&gt;   i_iserunordered_map;</span>
<span class="lineNum">    1566 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint16_t, StructInternalSplit&gt;        i_isplunordered_map;</span>
<span class="lineNum">    1567 </span><span class="lineCov">        600 :     std::unordered_map&lt;uint32_t, StructExternalSerialize&gt; i_eserunordered_map;</span>
<span class="lineNum">    1568 </span><span class="lineCov">        600 :     std::unordered_map&lt;int8_t, StructExternalSplit&gt;       i_esplunordered_map;</span>
<span class="lineNum">    1569 </span>            : 
<span class="lineNum">    1570 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1571 </span>            :     {
<span class="lineNum">    1572 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1573 </span>            : 
<span class="lineNum">    1574 </span><span class="lineCov">        300 :       iar(i_podunordered_map);</span>
<span class="lineNum">    1575 </span><span class="lineCov">        300 :       iar(i_iserunordered_map);</span>
<span class="lineNum">    1576 </span><span class="lineCov">        300 :       iar(i_isplunordered_map);</span>
<span class="lineNum">    1577 </span><span class="lineCov">        300 :       iar(i_eserunordered_map);</span>
<span class="lineNum">    1578 </span><span class="lineCov">        300 :       iar(i_esplunordered_map);</span>
<span class="lineNum">    1579 </span>            :     }
<span class="lineNum">    1580 </span>            : 
<span class="lineNum">    1581 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_podunordered_map)</span>
<span class="lineNum">    1582 </span>            :     {
<span class="lineNum">    1583 </span><span class="lineCov">      30000 :       auto v = o_podunordered_map.find(p.first);</span>
<span class="lineNum">    1584 </span><span class="lineCov">      30000 :       BOOST_CHECK(v != o_podunordered_map.end());</span>
<span class="lineNum">    1585 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(p.second, v-&gt;second);</span>
<span class="lineNum">    1586 </span>            :     }
<span class="lineNum">    1587 </span>            : 
<span class="lineNum">    1588 </span><span class="lineCov">      30273 :     for(auto const &amp; p : i_iserunordered_map)</span>
<span class="lineNum">    1589 </span>            :     {
<span class="lineNum">    1590 </span><span class="lineCov">      29973 :       auto v = o_iserunordered_map.find(p.first);</span>
<span class="lineNum">    1591 </span><span class="lineCov">      29973 :       BOOST_CHECK(v != o_iserunordered_map.end());</span>
<span class="lineNum">    1592 </span><span class="lineCov">      29973 :       BOOST_CHECK_EQUAL(p.second, v-&gt;second);</span>
<span class="lineNum">    1593 </span>            :     }
<span class="lineNum">    1594 </span>            : 
<span class="lineNum">    1595 </span><span class="lineCov">      30282 :     for(auto const &amp; p : i_isplunordered_map)</span>
<span class="lineNum">    1596 </span>            :     {
<span class="lineNum">    1597 </span><span class="lineCov">      29982 :       auto v = o_isplunordered_map.find(p.first);</span>
<span class="lineNum">    1598 </span><span class="lineCov">      29982 :       BOOST_CHECK(v != o_isplunordered_map.end());</span>
<span class="lineNum">    1599 </span><span class="lineCov">      29982 :       BOOST_CHECK_EQUAL(p.second, v-&gt;second);</span>
<span class="lineNum">    1600 </span>            :     }
<span class="lineNum">    1601 </span>            : 
<span class="lineNum">    1602 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_eserunordered_map)</span>
<span class="lineNum">    1603 </span>            :     {
<span class="lineNum">    1604 </span><span class="lineCov">      30000 :       auto v = o_eserunordered_map.find(p.first);</span>
<span class="lineNum">    1605 </span><span class="lineCov">      30000 :       BOOST_CHECK(v != o_eserunordered_map.end());</span>
<span class="lineNum">    1606 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(p.second, v-&gt;second);</span>
<span class="lineNum">    1607 </span>            :     }
<span class="lineNum">    1608 </span>            : 
<span class="lineNum">    1609 </span><span class="lineCov">      25199 :     for(auto const &amp; p : i_esplunordered_map)</span>
<span class="lineNum">    1610 </span>            :     {
<span class="lineNum">    1611 </span><span class="lineCov">      24899 :       auto v = o_esplunordered_map.find(p.first);</span>
<span class="lineNum">    1612 </span><span class="lineCov">      24899 :       BOOST_CHECK(v != o_esplunordered_map.end());</span>
<span class="lineNum">    1613 </span><span class="lineCov">      24899 :       BOOST_CHECK_EQUAL(p.second, v-&gt;second);</span>
<span class="lineNum">    1614 </span>            :     }
<span class="lineNum">    1615 </span><span class="lineCov">          3 :   }</span>
<a name="1616"><span class="lineNum">    1616 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1617 </span>            : 
<span class="lineNum">    1618 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_unordered_map )</span>
<span class="lineNum">    1619 </span>            : {
<span class="lineNum">    1620 </span><span class="lineCov">          1 :   test_unordered_map&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1621"><span class="lineNum">    1621 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1622 </span>            : 
<span class="lineNum">    1623 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_unordered_map )</span>
<span class="lineNum">    1624 </span>            : {
<span class="lineNum">    1625 </span><span class="lineCov">          1 :   test_unordered_map&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1626"><span class="lineNum">    1626 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1627 </span>            : 
<span class="lineNum">    1628 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_unordered_map )</span>
<span class="lineNum">    1629 </span>            : {
<span class="lineNum">    1630 </span><span class="lineCov">          1 :   test_unordered_map&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1631 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1632 </span>            : 
<a name="1633"><span class="lineNum">    1633 </span>            : // ######################################################################</a>
<span class="lineNum">    1634 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1635 </span><span class="lineCov">          3 : void test_unordered_multimap()</span>
<span class="lineNum">    1636 </span>            : {
<span class="lineNum">    1637 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1638 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1639 </span>            : 
<span class="lineNum">    1640 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1641 </span>            :   {
<span class="lineNum">    1642 </span><span class="lineCov">        300 :     std::unordered_multimap&lt;std::string, int&gt; o_podunordered_multimap;</span>
<span class="lineNum">    1643 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1644 </span>            :     {
<span class="lineNum">    1645 </span><span class="lineCov">      30000 :       auto key = random_value&lt;std::string&gt;(gen);</span>
<span class="lineNum">    1646 </span><span class="lineCov">      30000 :       o_podunordered_multimap.insert({key, random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">    1647 </span><span class="lineCov">      30000 :       o_podunordered_multimap.insert({key, random_value&lt;int&gt;(gen)});</span>
<span class="lineNum">    1648 </span>            :     }
<span class="lineNum">    1649 </span>            : 
<span class="lineNum">    1650 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int, StructInternalSerialize&gt; o_iserunordered_multimap;</span>
<span class="lineNum">    1651 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1652 </span>            :     {
<span class="lineNum">    1653 </span><span class="lineCov">      30000 :       auto key = random_value&lt;int&gt;(gen);</span>
<span class="lineNum">    1654 </span><span class="lineCov">      30000 :       o_iserunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1655 </span><span class="lineCov">      30000 :       o_iserunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1656 </span>            :     }
<span class="lineNum">    1657 </span>            : 
<span class="lineNum">    1658 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int, StructInternalSplit&gt; o_isplunordered_multimap;</span>
<span class="lineNum">    1659 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1660 </span>            :     {
<span class="lineNum">    1661 </span><span class="lineCov">      30000 :       auto key = random_value&lt;int&gt;(gen);</span>
<span class="lineNum">    1662 </span><span class="lineCov">      30000 :       o_isplunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1663 </span><span class="lineCov">      30000 :       o_isplunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1664 </span>            :     }
<span class="lineNum">    1665 </span>            : 
<span class="lineNum">    1666 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;uint32_t, StructExternalSerialize&gt; o_eserunordered_multimap;</span>
<span class="lineNum">    1667 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1668 </span>            :     {
<span class="lineNum">    1669 </span><span class="lineCov">      30000 :       auto key = random_value&lt;uint32_t&gt;(gen);</span>
<span class="lineNum">    1670 </span><span class="lineCov">      30000 :       o_eserunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1671 </span><span class="lineCov">      30000 :       o_eserunordered_multimap.insert({key, { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1672 </span>            :     }
<span class="lineNum">    1673 </span>            : 
<span class="lineNum">    1674 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int8_t, StructExternalSplit&gt; o_esplunordered_multimap;</span>
<span class="lineNum">    1675 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1676 </span>            :     {
<span class="lineNum">    1677 </span><span class="lineCov">      30000 :       auto key = random_value&lt;char&gt;(gen);</span>
<span class="lineNum">    1678 </span><span class="lineCov">      30000 :       o_esplunordered_multimap.insert({key,  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1679 </span><span class="lineCov">      30000 :       o_esplunordered_multimap.insert({key,  { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) }});</span>
<span class="lineNum">    1680 </span>            :     }
<span class="lineNum">    1681 </span>            : 
<span class="lineNum">    1682 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1683 </span>            :     {
<span class="lineNum">    1684 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1685 </span>            : 
<span class="lineNum">    1686 </span><span class="lineCov">        300 :       oar(o_podunordered_multimap);</span>
<span class="lineNum">    1687 </span><span class="lineCov">        300 :       oar(o_iserunordered_multimap);</span>
<span class="lineNum">    1688 </span><span class="lineCov">        300 :       oar(o_isplunordered_multimap);</span>
<span class="lineNum">    1689 </span><span class="lineCov">        300 :       oar(o_eserunordered_multimap);</span>
<span class="lineNum">    1690 </span><span class="lineCov">        300 :       oar(o_esplunordered_multimap);</span>
<span class="lineNum">    1691 </span>            :     }
<span class="lineNum">    1692 </span>            : 
<span class="lineNum">    1693 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;std::string, int&gt; i_podunordered_multimap;</span>
<span class="lineNum">    1694 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int, StructInternalSerialize&gt;   i_iserunordered_multimap;</span>
<span class="lineNum">    1695 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int, StructInternalSplit&gt;        i_isplunordered_multimap;</span>
<span class="lineNum">    1696 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;uint32_t, StructExternalSerialize&gt; i_eserunordered_multimap;</span>
<span class="lineNum">    1697 </span><span class="lineCov">        600 :     std::unordered_multimap&lt;int8_t, StructExternalSplit&gt;       i_esplunordered_multimap;</span>
<span class="lineNum">    1698 </span>            : 
<span class="lineNum">    1699 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1700 </span>            :     {
<span class="lineNum">    1701 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1702 </span>            : 
<span class="lineNum">    1703 </span><span class="lineCov">        300 :       iar(i_podunordered_multimap);</span>
<span class="lineNum">    1704 </span><span class="lineCov">        300 :       iar(i_iserunordered_multimap);</span>
<span class="lineNum">    1705 </span><span class="lineCov">        300 :       iar(i_isplunordered_multimap);</span>
<span class="lineNum">    1706 </span><span class="lineCov">        300 :       iar(i_eserunordered_multimap);</span>
<span class="lineNum">    1707 </span><span class="lineCov">        300 :       iar(i_esplunordered_multimap);</span>
<span class="lineNum">    1708 </span>            :     }
<span class="lineNum">    1709 </span>            : 
<span class="lineNum">    1710 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_podunordered_multimap.size(),  o_podunordered_multimap.size());</span>
<span class="lineNum">    1711 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_iserunordered_multimap.size(), o_iserunordered_multimap.size());</span>
<span class="lineNum">    1712 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_isplunordered_multimap.size(), o_isplunordered_multimap.size());</span>
<span class="lineNum">    1713 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_eserunordered_multimap.size(), o_eserunordered_multimap.size());</span>
<span class="lineNum">    1714 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_esplunordered_multimap.size(), o_esplunordered_multimap.size());</span>
<span class="lineNum">    1715 </span>            : 
<span class="lineNum">    1716 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_podunordered_multimap)</span>
<span class="lineNum">    1717 </span>            :     {
<span class="lineNum">    1718 </span><span class="lineCov">      60000 :       size_t const bucket = o_podunordered_multimap.bucket(p.first);</span>
<span class="lineNum">    1719 </span><span class="lineCov">      60000 :       auto bucket_begin   = o_podunordered_multimap.begin(bucket);</span>
<span class="lineNum">    1720 </span><span class="lineCov">      60000 :       auto bucket_end     = o_podunordered_multimap.end(bucket);</span>
<span class="lineNum">    1721 </span><span class="lineCov">      60000 :       BOOST_CHECK(std::find(bucket_begin, bucket_end, p) != bucket_end);</span>
<span class="lineNum">    1722 </span>            :     }
<span class="lineNum">    1723 </span>            : 
<span class="lineNum">    1724 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_iserunordered_multimap)</span>
<span class="lineNum">    1725 </span>            :     {
<span class="lineNum">    1726 </span><span class="lineCov">      60000 :       size_t const bucket = o_iserunordered_multimap.bucket(p.first);</span>
<span class="lineNum">    1727 </span><span class="lineCov">      60000 :       auto bucket_begin   = o_iserunordered_multimap.begin(bucket);</span>
<span class="lineNum">    1728 </span><span class="lineCov">      60000 :       auto bucket_end     = o_iserunordered_multimap.end(bucket);</span>
<span class="lineNum">    1729 </span><span class="lineCov">      60000 :       BOOST_CHECK(std::find(bucket_begin, bucket_end, p) != bucket_end);</span>
<span class="lineNum">    1730 </span>            :     }
<span class="lineNum">    1731 </span>            : 
<span class="lineNum">    1732 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_isplunordered_multimap)</span>
<span class="lineNum">    1733 </span>            :     {
<span class="lineNum">    1734 </span><span class="lineCov">      60000 :       size_t const bucket = o_isplunordered_multimap.bucket(p.first);</span>
<span class="lineNum">    1735 </span><span class="lineCov">      60000 :       auto bucket_begin   = o_isplunordered_multimap.begin(bucket);</span>
<span class="lineNum">    1736 </span><span class="lineCov">      60000 :       auto bucket_end     = o_isplunordered_multimap.end(bucket);</span>
<span class="lineNum">    1737 </span><span class="lineCov">      60000 :       BOOST_CHECK(std::find(bucket_begin, bucket_end, p) != bucket_end);</span>
<span class="lineNum">    1738 </span>            :     }
<span class="lineNum">    1739 </span>            : 
<span class="lineNum">    1740 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_eserunordered_multimap)</span>
<span class="lineNum">    1741 </span>            :     {
<span class="lineNum">    1742 </span><span class="lineCov">      60000 :       size_t const bucket = o_eserunordered_multimap.bucket(p.first);</span>
<span class="lineNum">    1743 </span><span class="lineCov">      60000 :       auto bucket_begin   = o_eserunordered_multimap.begin(bucket);</span>
<span class="lineNum">    1744 </span><span class="lineCov">      60000 :       auto bucket_end     = o_eserunordered_multimap.end(bucket);</span>
<span class="lineNum">    1745 </span><span class="lineCov">      60000 :       BOOST_CHECK(std::find(bucket_begin, bucket_end, p) != bucket_end);</span>
<span class="lineNum">    1746 </span>            :     }
<span class="lineNum">    1747 </span>            : 
<span class="lineNum">    1748 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_esplunordered_multimap)</span>
<span class="lineNum">    1749 </span>            :     {
<span class="lineNum">    1750 </span><span class="lineCov">      60000 :       size_t const bucket = o_esplunordered_multimap.bucket(p.first);</span>
<span class="lineNum">    1751 </span><span class="lineCov">      60000 :       auto bucket_begin   = o_esplunordered_multimap.begin(bucket);</span>
<span class="lineNum">    1752 </span><span class="lineCov">      60000 :       auto bucket_end     = o_esplunordered_multimap.end(bucket);</span>
<span class="lineNum">    1753 </span><span class="lineCov">      60000 :       BOOST_CHECK(std::find(bucket_begin, bucket_end, p) != bucket_end);</span>
<span class="lineNum">    1754 </span>            :     }
<span class="lineNum">    1755 </span><span class="lineCov">          3 :   }</span>
<a name="1756"><span class="lineNum">    1756 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1757 </span>            : 
<span class="lineNum">    1758 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_unordered_multimap )</span>
<span class="lineNum">    1759 </span>            : {
<span class="lineNum">    1760 </span><span class="lineCov">          1 :   test_unordered_multimap&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1761"><span class="lineNum">    1761 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1762 </span>            : 
<span class="lineNum">    1763 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_unordered_multimap )</span>
<span class="lineNum">    1764 </span>            : {
<span class="lineNum">    1765 </span><span class="lineCov">          1 :   test_unordered_multimap&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1766"><span class="lineNum">    1766 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1767 </span>            : 
<span class="lineNum">    1768 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_unordered_multimap )</span>
<span class="lineNum">    1769 </span>            : {
<span class="lineNum">    1770 </span><span class="lineCov">          1 :   test_unordered_multimap&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1771 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1772 </span>            : 
<a name="1773"><span class="lineNum">    1773 </span>            : // ######################################################################</a>
<span class="lineNum">    1774 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1775 </span><span class="lineCov">          3 : void test_unordered_set()</span>
<span class="lineNum">    1776 </span>            : {
<span class="lineNum">    1777 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1778 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1779 </span>            : 
<span class="lineNum">    1780 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1781 </span>            :   {
<span class="lineNum">    1782 </span><span class="lineCov">        300 :     std::unordered_set&lt;int&gt; o_podunordered_set;</span>
<span class="lineNum">    1783 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1784 </span><span class="lineCov">      30000 :       o_podunordered_set.insert(random_value&lt;int&gt;(gen));</span>
<span class="lineNum">    1785 </span>            : 
<span class="lineNum">    1786 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructInternalSerialize, StructHash&lt;StructInternalSerialize&gt;&gt; o_iserunordered_set;</span>
<span class="lineNum">    1787 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1788 </span><span class="lineCov">      30000 :       o_iserunordered_set.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1789 </span>            : 
<span class="lineNum">    1790 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructInternalSplit, StructHash&lt;StructInternalSplit&gt;&gt; o_isplunordered_set;</span>
<span class="lineNum">    1791 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1792 </span><span class="lineCov">      30000 :       o_isplunordered_set.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1793 </span>            : 
<span class="lineNum">    1794 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructExternalSerialize, StructHash&lt;StructExternalSerialize&gt;&gt; o_eserunordered_set;</span>
<span class="lineNum">    1795 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1796 </span><span class="lineCov">      30000 :       o_eserunordered_set.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1797 </span>            : 
<span class="lineNum">    1798 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructExternalSplit, StructHash&lt;StructExternalSplit&gt;&gt; o_esplunordered_set;</span>
<span class="lineNum">    1799 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1800 </span><span class="lineCov">      30000 :       o_esplunordered_set.insert({ random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) });</span>
<span class="lineNum">    1801 </span>            : 
<span class="lineNum">    1802 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1803 </span>            :     {
<span class="lineNum">    1804 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1805 </span>            : 
<span class="lineNum">    1806 </span><span class="lineCov">        300 :       oar(o_podunordered_set);</span>
<span class="lineNum">    1807 </span><span class="lineCov">        300 :       oar(o_iserunordered_set);</span>
<span class="lineNum">    1808 </span><span class="lineCov">        300 :       oar(o_isplunordered_set);</span>
<span class="lineNum">    1809 </span><span class="lineCov">        300 :       oar(o_eserunordered_set);</span>
<span class="lineNum">    1810 </span><span class="lineCov">        300 :       oar(o_esplunordered_set);</span>
<span class="lineNum">    1811 </span>            :     }
<span class="lineNum">    1812 </span>            : 
<span class="lineNum">    1813 </span><span class="lineCov">        600 :     std::unordered_set&lt;int&gt; i_podunordered_set;</span>
<span class="lineNum">    1814 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructInternalSerialize, StructHash&lt;StructInternalSerialize&gt;&gt;   i_iserunordered_set;</span>
<span class="lineNum">    1815 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructInternalSplit, StructHash&lt;StructInternalSplit&gt;&gt;           i_isplunordered_set;</span>
<span class="lineNum">    1816 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructExternalSerialize, StructHash&lt;StructExternalSerialize&gt;&gt;   i_eserunordered_set;</span>
<span class="lineNum">    1817 </span><span class="lineCov">        600 :     std::unordered_set&lt;StructExternalSplit, StructHash&lt;StructExternalSplit&gt;&gt;           i_esplunordered_set;</span>
<span class="lineNum">    1818 </span>            : 
<span class="lineNum">    1819 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1820 </span>            :     {
<span class="lineNum">    1821 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1822 </span>            : 
<span class="lineNum">    1823 </span><span class="lineCov">        300 :       iar(i_podunordered_set);</span>
<span class="lineNum">    1824 </span><span class="lineCov">        300 :       iar(i_iserunordered_set);</span>
<span class="lineNum">    1825 </span><span class="lineCov">        300 :       iar(i_isplunordered_set);</span>
<span class="lineNum">    1826 </span><span class="lineCov">        300 :       iar(i_eserunordered_set);</span>
<span class="lineNum">    1827 </span><span class="lineCov">        300 :       iar(i_esplunordered_set);</span>
<span class="lineNum">    1828 </span>            :     }
<span class="lineNum">    1829 </span>            : 
<span class="lineNum">    1830 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_podunordered_set)</span>
<span class="lineNum">    1831 </span>            :     {
<span class="lineNum">    1832 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(o_podunordered_set.count(p), 1);</span>
<span class="lineNum">    1833 </span>            :     }
<span class="lineNum">    1834 </span>            : 
<span class="lineNum">    1835 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_iserunordered_set)</span>
<span class="lineNum">    1836 </span>            :     {
<span class="lineNum">    1837 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(o_iserunordered_set.count(p), 1);</span>
<span class="lineNum">    1838 </span>            :     }
<span class="lineNum">    1839 </span>            : 
<span class="lineNum">    1840 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_isplunordered_set)</span>
<span class="lineNum">    1841 </span>            :     {
<span class="lineNum">    1842 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(o_isplunordered_set.count(p), 1);</span>
<span class="lineNum">    1843 </span>            :     }
<span class="lineNum">    1844 </span>            : 
<span class="lineNum">    1845 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_eserunordered_set)</span>
<span class="lineNum">    1846 </span>            :     {
<span class="lineNum">    1847 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(o_eserunordered_set.count(p), 1);</span>
<span class="lineNum">    1848 </span>            :     }
<span class="lineNum">    1849 </span>            : 
<span class="lineNum">    1850 </span><span class="lineCov">      30300 :     for(auto const &amp; p : i_esplunordered_set)</span>
<span class="lineNum">    1851 </span>            :     {
<span class="lineNum">    1852 </span><span class="lineCov">      30000 :       BOOST_CHECK_EQUAL(o_esplunordered_set.count(p), 1);</span>
<span class="lineNum">    1853 </span>            :     }
<span class="lineNum">    1854 </span><span class="lineCov">          3 :   }</span>
<a name="1855"><span class="lineNum">    1855 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1856 </span>            : 
<span class="lineNum">    1857 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_unordered_set )</span>
<span class="lineNum">    1858 </span>            : {
<span class="lineNum">    1859 </span><span class="lineCov">          1 :   test_unordered_set&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1860"><span class="lineNum">    1860 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1861 </span>            : 
<span class="lineNum">    1862 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_unordered_set )</span>
<span class="lineNum">    1863 </span>            : {
<span class="lineNum">    1864 </span><span class="lineCov">          1 :   test_unordered_set&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1865"><span class="lineNum">    1865 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1866 </span>            : 
<span class="lineNum">    1867 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_unordered_set )</span>
<span class="lineNum">    1868 </span>            : {
<span class="lineNum">    1869 </span><span class="lineCov">          1 :   test_unordered_set&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1870 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1871 </span>            : 
<a name="1872"><span class="lineNum">    1872 </span>            : // ######################################################################</a>
<span class="lineNum">    1873 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1874 </span><span class="lineCov">          3 : void test_unordered_multiset()</span>
<span class="lineNum">    1875 </span>            : {
<span class="lineNum">    1876 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1877 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1878 </span>            : 
<span class="lineNum">    1879 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1880 </span>            :   {
<span class="lineNum">    1881 </span><span class="lineCov">        300 :     std::unordered_multiset&lt;int&gt; o_podunordered_multiset;</span>
<span class="lineNum">    1882 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1883 </span>            :     {
<span class="lineNum">    1884 </span><span class="lineCov">      30000 :       int value = random_value&lt;int&gt;(gen);</span>
<span class="lineNum">    1885 </span><span class="lineCov">      30000 :       o_podunordered_multiset.insert(value);</span>
<span class="lineNum">    1886 </span><span class="lineCov">      30000 :       o_podunordered_multiset.insert(value);</span>
<span class="lineNum">    1887 </span>            :     }
<span class="lineNum">    1888 </span>            : 
<span class="lineNum">    1889 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructInternalSerialize, StructHash&lt;StructInternalSerialize&gt;&gt; o_iserunordered_multiset;</span>
<span class="lineNum">    1890 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1891 </span>            :     {
<span class="lineNum">    1892 </span><span class="lineCov">      30000 :       StructInternalSerialize value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1893 </span><span class="lineCov">      30000 :       o_iserunordered_multiset.insert(value);</span>
<span class="lineNum">    1894 </span><span class="lineCov">      30000 :       o_iserunordered_multiset.insert(value);</span>
<span class="lineNum">    1895 </span>            :     }
<span class="lineNum">    1896 </span>            : 
<span class="lineNum">    1897 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructInternalSplit, StructHash&lt;StructInternalSplit&gt;&gt; o_isplunordered_multiset;</span>
<span class="lineNum">    1898 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1899 </span>            :     {
<span class="lineNum">    1900 </span><span class="lineCov">      30000 :       StructInternalSplit value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1901 </span><span class="lineCov">      30000 :       o_isplunordered_multiset.insert(value);</span>
<span class="lineNum">    1902 </span><span class="lineCov">      30000 :       o_isplunordered_multiset.insert(value);</span>
<span class="lineNum">    1903 </span>            :     }
<span class="lineNum">    1904 </span>            : 
<span class="lineNum">    1905 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructExternalSerialize, StructHash&lt;StructExternalSerialize&gt;&gt; o_eserunordered_multiset;</span>
<span class="lineNum">    1906 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1907 </span>            :     {
<span class="lineNum">    1908 </span><span class="lineCov">      30000 :       StructExternalSerialize value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1909 </span><span class="lineCov">      30000 :       o_eserunordered_multiset.insert(value);</span>
<span class="lineNum">    1910 </span><span class="lineCov">      30000 :       o_eserunordered_multiset.insert(value);</span>
<span class="lineNum">    1911 </span>            :     }
<span class="lineNum">    1912 </span>            : 
<span class="lineNum">    1913 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructExternalSplit, StructHash&lt;StructExternalSplit&gt;&gt; o_esplunordered_multiset;</span>
<span class="lineNum">    1914 </span><span class="lineCov">      30300 :     for(int j=0; j&lt;100; ++j)</span>
<span class="lineNum">    1915 </span>            :     {
<span class="lineNum">    1916 </span><span class="lineCov">      30000 :       StructExternalSplit value = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    1917 </span><span class="lineCov">      30000 :       o_esplunordered_multiset.insert(value);</span>
<span class="lineNum">    1918 </span><span class="lineCov">      30000 :       o_esplunordered_multiset.insert(value);</span>
<span class="lineNum">    1919 </span>            :     }
<span class="lineNum">    1920 </span>            : 
<span class="lineNum">    1921 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    1922 </span>            :     {
<span class="lineNum">    1923 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    1924 </span>            : 
<span class="lineNum">    1925 </span><span class="lineCov">        300 :       oar(o_podunordered_multiset);</span>
<span class="lineNum">    1926 </span><span class="lineCov">        300 :       oar(o_iserunordered_multiset);</span>
<span class="lineNum">    1927 </span><span class="lineCov">        300 :       oar(o_isplunordered_multiset);</span>
<span class="lineNum">    1928 </span><span class="lineCov">        300 :       oar(o_eserunordered_multiset);</span>
<span class="lineNum">    1929 </span><span class="lineCov">        300 :       oar(o_esplunordered_multiset);</span>
<span class="lineNum">    1930 </span>            :     }
<span class="lineNum">    1931 </span>            : 
<span class="lineNum">    1932 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;int&gt; i_podunordered_multiset;</span>
<span class="lineNum">    1933 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructInternalSerialize, StructHash&lt;StructInternalSerialize&gt;&gt; i_iserunordered_multiset;</span>
<span class="lineNum">    1934 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructInternalSplit, StructHash&lt;StructInternalSplit&gt;&gt;         i_isplunordered_multiset;</span>
<span class="lineNum">    1935 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructExternalSerialize, StructHash&lt;StructExternalSerialize&gt;&gt; i_eserunordered_multiset;</span>
<span class="lineNum">    1936 </span><span class="lineCov">        600 :     std::unordered_multiset&lt;StructExternalSplit, StructHash&lt;StructExternalSplit&gt;&gt;         i_esplunordered_multiset;</span>
<span class="lineNum">    1937 </span>            : 
<span class="lineNum">    1938 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    1939 </span>            :     {
<span class="lineNum">    1940 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    1941 </span>            : 
<span class="lineNum">    1942 </span><span class="lineCov">        300 :       iar(i_podunordered_multiset);</span>
<span class="lineNum">    1943 </span><span class="lineCov">        300 :       iar(i_iserunordered_multiset);</span>
<span class="lineNum">    1944 </span><span class="lineCov">        300 :       iar(i_isplunordered_multiset);</span>
<span class="lineNum">    1945 </span><span class="lineCov">        300 :       iar(i_eserunordered_multiset);</span>
<span class="lineNum">    1946 </span><span class="lineCov">        300 :       iar(i_esplunordered_multiset);</span>
<span class="lineNum">    1947 </span>            :     }
<span class="lineNum">    1948 </span>            : 
<span class="lineNum">    1949 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_podunordered_multiset)</span>
<span class="lineNum">    1950 </span>            :     {
<span class="lineNum">    1951 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_podunordered_multiset.count(p), i_podunordered_multiset.count(p));</span>
<span class="lineNum">    1952 </span>            :     }
<span class="lineNum">    1953 </span>            : 
<span class="lineNum">    1954 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_iserunordered_multiset)</span>
<span class="lineNum">    1955 </span>            :     {
<span class="lineNum">    1956 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_iserunordered_multiset.count(p), i_iserunordered_multiset.count(p));</span>
<span class="lineNum">    1957 </span>            :     }
<span class="lineNum">    1958 </span>            : 
<span class="lineNum">    1959 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_isplunordered_multiset)</span>
<span class="lineNum">    1960 </span>            :     {
<span class="lineNum">    1961 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_isplunordered_multiset.count(p), i_isplunordered_multiset.count(p));</span>
<span class="lineNum">    1962 </span>            :     }
<span class="lineNum">    1963 </span>            : 
<span class="lineNum">    1964 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_eserunordered_multiset)</span>
<span class="lineNum">    1965 </span>            :     {
<span class="lineNum">    1966 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_eserunordered_multiset.count(p), i_eserunordered_multiset.count(p));</span>
<span class="lineNum">    1967 </span>            :     }
<span class="lineNum">    1968 </span>            : 
<span class="lineNum">    1969 </span><span class="lineCov">      60300 :     for(auto const &amp; p : i_esplunordered_multiset)</span>
<span class="lineNum">    1970 </span>            :     {
<span class="lineNum">    1971 </span><span class="lineCov">      60000 :       BOOST_CHECK_EQUAL(o_esplunordered_multiset.count(p), i_esplunordered_multiset.count(p));</span>
<span class="lineNum">    1972 </span>            :     }
<span class="lineNum">    1973 </span><span class="lineCov">          3 :   }</span>
<a name="1974"><span class="lineNum">    1974 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    1975 </span>            : 
<span class="lineNum">    1976 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_unordered_multiset )</span>
<span class="lineNum">    1977 </span>            : {
<span class="lineNum">    1978 </span><span class="lineCov">          1 :   test_unordered_multiset&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="1979"><span class="lineNum">    1979 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1980 </span>            : 
<span class="lineNum">    1981 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_unordered_multiset )</span>
<span class="lineNum">    1982 </span>            : {
<span class="lineNum">    1983 </span><span class="lineCov">          1 :   test_unordered_multiset&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="1984"><span class="lineNum">    1984 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    1985 </span>            : 
<span class="lineNum">    1986 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_unordered_multiset )</span>
<span class="lineNum">    1987 </span>            : {
<span class="lineNum">    1988 </span><span class="lineCov">          1 :   test_unordered_multiset&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    1989 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    1990 </span>            : 
<a name="1991"><span class="lineNum">    1991 </span>            : // ######################################################################</a>
<span class="lineNum">    1992 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    1993 </span><span class="lineCov">          3 : void test_vector()</span>
<span class="lineNum">    1994 </span>            : {
<span class="lineNum">    1995 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    1996 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    1997 </span>            : 
<span class="lineNum">    1998 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    1999 </span>            :   {
<span class="lineNum">    2000 </span><span class="lineCov">        300 :     std::vector&lt;int&gt; o_podvector(100);</span>
<span class="lineNum">    2001 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_podvector)</span>
<span class="lineNum">    2002 </span><span class="lineCov">      30000 :       elem = random_value&lt;decltype(o_podvector)::value_type&gt;(gen);</span>
<span class="lineNum">    2003 </span>            : 
<span class="lineNum">    2004 </span><span class="lineCov">        600 :     std::vector&lt;StructInternalSerialize&gt; o_iservector(100);</span>
<span class="lineNum">    2005 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_iservector)</span>
<span class="lineNum">    2006 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2007 </span>            : 
<span class="lineNum">    2008 </span><span class="lineCov">        600 :     std::vector&lt;StructInternalSplit&gt; o_isplvector(100);</span>
<span class="lineNum">    2009 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_isplvector)</span>
<span class="lineNum">    2010 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2011 </span>            : 
<span class="lineNum">    2012 </span><span class="lineCov">        600 :     std::vector&lt;StructExternalSerialize&gt; o_eservector(100);</span>
<span class="lineNum">    2013 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_eservector)</span>
<span class="lineNum">    2014 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2015 </span>            : 
<span class="lineNum">    2016 </span><span class="lineCov">        600 :     std::vector&lt;StructExternalSplit&gt; o_esplvector(100);</span>
<span class="lineNum">    2017 </span><span class="lineCov">      30300 :     for(auto &amp; elem : o_esplvector)</span>
<span class="lineNum">    2018 </span><span class="lineCov">      30000 :       elem = { random_value&lt;int&gt;(gen), random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2019 </span>            : 
<span class="lineNum">    2020 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    2021 </span>            :     {
<span class="lineNum">    2022 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2023 </span>            : 
<span class="lineNum">    2024 </span><span class="lineCov">        300 :       oar(o_podvector);</span>
<span class="lineNum">    2025 </span><span class="lineCov">        300 :       oar(o_iservector);</span>
<span class="lineNum">    2026 </span><span class="lineCov">        300 :       oar(o_isplvector);</span>
<span class="lineNum">    2027 </span><span class="lineCov">        300 :       oar(o_eservector);</span>
<span class="lineNum">    2028 </span><span class="lineCov">        300 :       oar(o_esplvector);</span>
<span class="lineNum">    2029 </span>            :     }
<span class="lineNum">    2030 </span>            : 
<span class="lineNum">    2031 </span><span class="lineCov">        600 :     std::vector&lt;int&gt; i_podvector;</span>
<span class="lineNum">    2032 </span><span class="lineCov">        600 :     std::vector&lt;StructInternalSerialize&gt; i_iservector;</span>
<span class="lineNum">    2033 </span><span class="lineCov">        600 :     std::vector&lt;StructInternalSplit&gt;     i_isplvector;</span>
<span class="lineNum">    2034 </span><span class="lineCov">        600 :     std::vector&lt;StructExternalSerialize&gt; i_eservector;</span>
<span class="lineNum">    2035 </span><span class="lineCov">        600 :     std::vector&lt;StructExternalSplit&gt;     i_esplvector;</span>
<span class="lineNum">    2036 </span>            : 
<span class="lineNum">    2037 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2038 </span>            :     {
<span class="lineNum">    2039 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2040 </span>            : 
<span class="lineNum">    2041 </span><span class="lineCov">        300 :       iar(i_podvector);</span>
<span class="lineNum">    2042 </span><span class="lineCov">        300 :       iar(i_iservector);</span>
<span class="lineNum">    2043 </span><span class="lineCov">        300 :       iar(i_isplvector);</span>
<span class="lineNum">    2044 </span><span class="lineCov">        300 :       iar(i_eservector);</span>
<span class="lineNum">    2045 </span><span class="lineCov">        300 :       iar(i_esplvector);</span>
<span class="lineNum">    2046 </span>            :     }
<span class="lineNum">    2047 </span>            : 
<span class="lineNum">    2048 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_podvector.size(),  o_podvector.size());</span>
<span class="lineNum">    2049 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_iservector.size(), o_iservector.size());</span>
<span class="lineNum">    2050 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_isplvector.size(), o_isplvector.size());</span>
<span class="lineNum">    2051 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_eservector.size(), o_eservector.size());</span>
<span class="lineNum">    2052 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_esplvector.size(), o_esplvector.size());</span>
<span class="lineNum">    2053 </span>            : 
<span class="lineNum">    2054 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_podvector.begin(),    i_podvector.end(),    o_podvector.begin(),  o_podvector.end());</span>
<span class="lineNum">    2055 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_iservector.begin(),   i_iservector.end(),   o_iservector.begin(), o_iservector.end());</span>
<span class="lineNum">    2056 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_isplvector.begin(),   i_isplvector.end(),   o_isplvector.begin(), o_isplvector.end());</span>
<span class="lineNum">    2057 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_eservector.begin(),   i_eservector.end(),   o_eservector.begin(), o_eservector.end());</span>
<span class="lineNum">    2058 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL_COLLECTIONS(i_esplvector.begin(),   i_esplvector.end(),   o_esplvector.begin(), o_esplvector.end());</span>
<span class="lineNum">    2059 </span><span class="lineCov">          3 :   }</span>
<a name="2060"><span class="lineNum">    2060 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2061 </span>            : 
<span class="lineNum">    2062 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_vector )</span>
<span class="lineNum">    2063 </span>            : {
<span class="lineNum">    2064 </span><span class="lineCov">          1 :   test_vector&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2065"><span class="lineNum">    2065 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2066 </span>            : 
<span class="lineNum">    2067 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_vector )</span>
<span class="lineNum">    2068 </span>            : {
<span class="lineNum">    2069 </span><span class="lineCov">          1 :   test_vector&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2070"><span class="lineNum">    2070 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2071 </span>            : 
<span class="lineNum">    2072 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_vector )</span>
<span class="lineNum">    2073 </span>            : {
<span class="lineNum">    2074 </span><span class="lineCov">          1 :   test_vector&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2075 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2076 </span>            : 
<a name="2077"><span class="lineNum">    2077 </span>            : // ######################################################################</a>
<span class="lineNum">    2078 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2079 </span><span class="lineCov">          3 : void test_pair()</span>
<span class="lineNum">    2080 </span>            : {
<span class="lineNum">    2081 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<a name="2082"><span class="lineNum">    2082 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span></a>
<span class="lineNum">    2083 </span>            : 
<span class="lineNum">    2084 </span><span class="lineCov">       5403 :   auto rng = [&amp;](){ return random_value&lt;int&gt;(gen); };</span>
<span class="lineNum">    2085 </span>            : 
<span class="lineNum">    2086 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2087 </span>            :   {
<span class="lineNum">    2088 </span><span class="lineCov">        300 :     std::pair&lt;int, int&gt; o_podpair = {rng(), rng()};</span>
<span class="lineNum">    2089 </span><span class="lineCov">        300 :     std::pair&lt;StructInternalSerialize, StructInternalSerialize&gt; o_iserpair = {{rng(), rng()}, {rng(), rng()}};</span>
<span class="lineNum">    2090 </span><span class="lineCov">        300 :     std::pair&lt;StructInternalSplit, StructInternalSplit&gt; o_isplpair = {{rng(), rng()}, {rng(), rng()}};</span>
<span class="lineNum">    2091 </span><span class="lineCov">        300 :     std::pair&lt;StructExternalSerialize, StructExternalSerialize&gt; o_eserpair = {{rng(), rng()}, {rng(), rng()}};</span>
<span class="lineNum">    2092 </span><span class="lineCov">        300 :     std::pair&lt;StructExternalSplit, StructExternalSplit&gt; o_esplpair = {{rng(), rng()}, {rng(), rng()}};</span>
<span class="lineNum">    2093 </span>            : 
<span class="lineNum">    2094 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2095 </span>            :     {
<span class="lineNum">    2096 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2097 </span>            : 
<span class="lineNum">    2098 </span><span class="lineCov">        300 :       oar(o_podpair);</span>
<span class="lineNum">    2099 </span><span class="lineCov">        300 :       oar(o_iserpair);</span>
<span class="lineNum">    2100 </span><span class="lineCov">        300 :       oar(o_isplpair);</span>
<span class="lineNum">    2101 </span><span class="lineCov">        300 :       oar(o_eserpair);</span>
<span class="lineNum">    2102 </span><span class="lineCov">        300 :       oar(o_esplpair);</span>
<span class="lineNum">    2103 </span>            :     }
<span class="lineNum">    2104 </span>            : 
<span class="lineNum">    2105 </span><span class="lineCov">        300 :     std::pair&lt;int, int&gt; i_podpair;</span>
<span class="lineNum">    2106 </span><span class="lineCov">        300 :     std::pair&lt;StructInternalSerialize, StructInternalSerialize&gt; i_iserpair;</span>
<span class="lineNum">    2107 </span><span class="lineCov">        300 :     std::pair&lt;StructInternalSplit, StructInternalSplit&gt; i_isplpair;</span>
<span class="lineNum">    2108 </span><span class="lineCov">        300 :     std::pair&lt;StructExternalSerialize, StructExternalSerialize&gt; i_eserpair;</span>
<span class="lineNum">    2109 </span><span class="lineCov">        300 :     std::pair&lt;StructExternalSplit, StructExternalSplit&gt; i_esplpair;</span>
<span class="lineNum">    2110 </span>            : 
<span class="lineNum">    2111 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2112 </span>            :     {
<span class="lineNum">    2113 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2114 </span>            : 
<span class="lineNum">    2115 </span><span class="lineCov">        300 :       iar(i_podpair);</span>
<span class="lineNum">    2116 </span><span class="lineCov">        300 :       iar(i_iserpair);</span>
<span class="lineNum">    2117 </span><span class="lineCov">        300 :       iar(i_isplpair);</span>
<span class="lineNum">    2118 </span><span class="lineCov">        300 :       iar(i_eserpair);</span>
<span class="lineNum">    2119 </span><span class="lineCov">        300 :       iar(i_esplpair);</span>
<span class="lineNum">    2120 </span>            :     }
<span class="lineNum">    2121 </span>            : 
<span class="lineNum">    2122 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_podpair.first, o_podpair.first );</span>
<span class="lineNum">    2123 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_podpair.second, o_podpair.second );</span>
<span class="lineNum">    2124 </span>            : 
<span class="lineNum">    2125 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_iserpair.first, o_iserpair.first );</span>
<span class="lineNum">    2126 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_iserpair.second, o_iserpair.second );</span>
<span class="lineNum">    2127 </span>            : 
<span class="lineNum">    2128 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_isplpair.first, o_isplpair.first );</span>
<span class="lineNum">    2129 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_isplpair.second, o_isplpair.second );</span>
<span class="lineNum">    2130 </span>            : 
<span class="lineNum">    2131 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_eserpair.first, o_eserpair.first );</span>
<span class="lineNum">    2132 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_eserpair.second, o_eserpair.second );</span>
<span class="lineNum">    2133 </span>            : 
<span class="lineNum">    2134 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_esplpair.first, o_esplpair.first );</span>
<span class="lineNum">    2135 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_esplpair.second, o_esplpair.second );</span>
<span class="lineNum">    2136 </span><span class="lineCov">          3 :   }</span>
<a name="2137"><span class="lineNum">    2137 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2138 </span>            : 
<span class="lineNum">    2139 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_pair )</span>
<span class="lineNum">    2140 </span>            : {
<span class="lineNum">    2141 </span><span class="lineCov">          1 :   test_pair&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2142"><span class="lineNum">    2142 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2143 </span>            : 
<span class="lineNum">    2144 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_pair )</span>
<span class="lineNum">    2145 </span>            : {
<a name="2146"><span class="lineNum">    2146 </span><span class="lineCov">          1 :   test_pair&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span></a>
<span class="lineNum">    2147 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2148 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_pair )</span>
<span class="lineNum">    2149 </span>            : {
<span class="lineNum">    2150 </span><span class="lineCov">          1 :   test_pair&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2151 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2152 </span>            : 
<a name="2153"><span class="lineNum">    2153 </span>            : // ######################################################################</a>
<span class="lineNum">    2154 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2155 </span><span class="lineCov">          3 : void test_tuple()</span>
<span class="lineNum">    2156 </span>            : {
<span class="lineNum">    2157 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<a name="2158"><span class="lineNum">    2158 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span></a>
<span class="lineNum">    2159 </span>            : 
<span class="lineNum">    2160 </span><span class="lineCov">      10803 :   auto rng = [&amp;](){ return random_value&lt;int&gt;(gen); };</span>
<span class="lineNum">    2161 </span>            : 
<span class="lineNum">    2162 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2163 </span>            :   {
<span class="lineNum">    2164 </span><span class="lineCov">        300 :     auto o_podtuple = std::make_tuple( rng(), rng(), rng(), rng() );</span>
<span class="lineNum">    2165 </span>            :     auto o_isertuple = std::make_tuple( StructInternalSerialize( rng(), rng() ),
<span class="lineNum">    2166 </span>            :         StructInternalSerialize( rng(), rng() ),
<span class="lineNum">    2167 </span>            :         StructInternalSerialize( rng(), rng() ),
<span class="lineNum">    2168 </span><span class="lineCov">        300 :         StructInternalSerialize( rng(), rng() ) );</span>
<span class="lineNum">    2169 </span>            :     auto o_ispltuple = std::make_tuple( StructInternalSplit( rng(), rng() ),
<span class="lineNum">    2170 </span>            :         StructInternalSplit( rng(), rng() ),
<span class="lineNum">    2171 </span>            :         StructInternalSplit( rng(), rng() ),
<span class="lineNum">    2172 </span><span class="lineCov">        300 :         StructInternalSplit( rng(), rng() ) );</span>
<span class="lineNum">    2173 </span>            :     auto o_esertuple = std::make_tuple( StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2174 </span>            :         StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2175 </span>            :         StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2176 </span><span class="lineCov">        300 :         StructExternalSerialize( rng(), rng() ) );</span>
<span class="lineNum">    2177 </span>            :     auto o_espltuple = std::make_tuple( StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2178 </span>            :         StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2179 </span>            :         StructExternalSerialize( rng(), rng() ),
<span class="lineNum">    2180 </span><span class="lineCov">        300 :         StructExternalSerialize( rng(), rng() ) );</span>
<span class="lineNum">    2181 </span>            : 
<span class="lineNum">    2182 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2183 </span>            :     {
<span class="lineNum">    2184 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2185 </span>            : 
<span class="lineNum">    2186 </span><span class="lineCov">        300 :       oar(o_podtuple);</span>
<span class="lineNum">    2187 </span><span class="lineCov">        300 :       oar(o_isertuple);</span>
<span class="lineNum">    2188 </span><span class="lineCov">        300 :       oar(o_ispltuple);</span>
<span class="lineNum">    2189 </span><span class="lineCov">        300 :       oar(o_esertuple);</span>
<span class="lineNum">    2190 </span><span class="lineCov">        300 :       oar(o_espltuple);</span>
<span class="lineNum">    2191 </span>            :     }
<span class="lineNum">    2192 </span>            : 
<span class="lineNum">    2193 </span><span class="lineCov">        300 :     decltype( o_podtuple  ) i_podtuple;</span>
<span class="lineNum">    2194 </span><span class="lineCov">        300 :     decltype( o_isertuple ) i_isertuple;</span>
<span class="lineNum">    2195 </span><span class="lineCov">        300 :     decltype( o_ispltuple ) i_ispltuple;</span>
<span class="lineNum">    2196 </span><span class="lineCov">        300 :     decltype( o_esertuple ) i_esertuple;</span>
<span class="lineNum">    2197 </span><span class="lineCov">        300 :     decltype( o_espltuple ) i_espltuple;</span>
<span class="lineNum">    2198 </span>            : 
<span class="lineNum">    2199 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2200 </span>            :     {
<span class="lineNum">    2201 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2202 </span>            : 
<span class="lineNum">    2203 </span><span class="lineCov">        300 :       iar(i_podtuple);</span>
<span class="lineNum">    2204 </span><span class="lineCov">        300 :       iar(i_isertuple);</span>
<span class="lineNum">    2205 </span><span class="lineCov">        300 :       iar(i_ispltuple);</span>
<span class="lineNum">    2206 </span><span class="lineCov">        300 :       iar(i_esertuple);</span>
<span class="lineNum">    2207 </span><span class="lineCov">        300 :       iar(i_espltuple);</span>
<span class="lineNum">    2208 </span>            :     }
<span class="lineNum">    2209 </span>            : 
<span class="lineNum">    2210 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_podtuple == o_podtuple, true );</span>
<span class="lineNum">    2211 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_isertuple == o_isertuple, true );</span>
<span class="lineNum">    2212 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_ispltuple == o_ispltuple, true );</span>
<span class="lineNum">    2213 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_esertuple == o_esertuple, true );</span>
<span class="lineNum">    2214 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( i_espltuple == o_espltuple, true );</span>
<span class="lineNum">    2215 </span><span class="lineCov">          3 :   }</span>
<a name="2216"><span class="lineNum">    2216 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2217 </span>            : 
<span class="lineNum">    2218 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_tuple )</span>
<span class="lineNum">    2219 </span>            : {
<span class="lineNum">    2220 </span><span class="lineCov">          1 :   test_tuple&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2221"><span class="lineNum">    2221 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2222 </span>            : 
<span class="lineNum">    2223 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_tuple )</span>
<span class="lineNum">    2224 </span>            : {
<span class="lineNum">    2225 </span><span class="lineCov">          1 :   test_tuple&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2226"><span class="lineNum">    2226 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2227 </span>            : 
<span class="lineNum">    2228 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_tuple )</span>
<span class="lineNum">    2229 </span>            : {
<span class="lineNum">    2230 </span><span class="lineCov">          1 :   test_tuple&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2231 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2232 </span>            : 
<a name="2233"><span class="lineNum">    2233 </span>            : // ######################################################################</a>
<span class="lineNum">    2234 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2235 </span><span class="lineCov">          3 : void test_complex()</span>
<span class="lineNum">    2236 </span>            : {
<span class="lineNum">    2237 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<a name="2238"><span class="lineNum">    2238 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span></a>
<a name="2239"><span class="lineNum">    2239 </span>            : </a>
<a name="2240"><span class="lineNum">    2240 </span><span class="lineCov">        603 :   auto rngF = [&amp;](){ return random_value&lt;float&gt;(gen); };</span></a>
<span class="lineNum">    2241 </span><span class="lineCov">        603 :   auto rngD = [&amp;](){ return random_value&lt;double&gt;(gen); };</span>
<span class="lineNum">    2242 </span><span class="lineCov">        603 :   auto rngLD = [&amp;](){ return random_value&lt;long double&gt;(gen); };</span>
<span class="lineNum">    2243 </span>            : 
<span class="lineNum">    2244 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2245 </span>            :   {
<span class="lineNum">    2246 </span><span class="lineCov">        300 :     std::complex&lt;float&gt; o_float( rngF(), rngF() );</span>
<span class="lineNum">    2247 </span><span class="lineCov">        300 :     std::complex&lt;double&gt; o_double( rngD(), rngD() );</span>
<span class="lineNum">    2248 </span><span class="lineCov">        300 :     std::complex&lt;long double&gt; o_ldouble( rngLD(), rngLD() );</span>
<span class="lineNum">    2249 </span>            : 
<span class="lineNum">    2250 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2251 </span>            :     {
<span class="lineNum">    2252 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2253 </span>            : 
<span class="lineNum">    2254 </span><span class="lineCov">        300 :       oar(o_float);</span>
<span class="lineNum">    2255 </span><span class="lineCov">        300 :       oar(o_double);</span>
<span class="lineNum">    2256 </span><span class="lineCov">        300 :       oar(o_ldouble);</span>
<span class="lineNum">    2257 </span>            :     }
<span class="lineNum">    2258 </span>            : 
<span class="lineNum">    2259 </span><span class="lineCov">        300 :     std::complex&lt;float&gt; i_float;</span>
<span class="lineNum">    2260 </span><span class="lineCov">        300 :     std::complex&lt;double&gt; i_double;</span>
<span class="lineNum">    2261 </span><span class="lineCov">        300 :     std::complex&lt;long double&gt; i_ldouble;</span>
<span class="lineNum">    2262 </span>            : 
<span class="lineNum">    2263 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2264 </span>            :     {
<span class="lineNum">    2265 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2266 </span>            : 
<span class="lineNum">    2267 </span><span class="lineCov">        300 :       iar(i_float);</span>
<span class="lineNum">    2268 </span><span class="lineCov">        300 :       iar(i_double);</span>
<span class="lineNum">    2269 </span><span class="lineCov">        300 :       iar(i_ldouble);</span>
<span class="lineNum">    2270 </span>            :     }
<span class="lineNum">    2271 </span>            : 
<span class="lineNum">    2272 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( o_float, i_float );</span>
<span class="lineNum">    2273 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE( o_double.real(), i_double.real(), 1e-5);</span>
<span class="lineNum">    2274 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE( o_double.imag(), i_double.imag(), 1e-5);</span>
<span class="lineNum">    2275 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE( o_ldouble.real(), i_ldouble.real(), 1e-5);</span>
<span class="lineNum">    2276 </span><span class="lineCov">        300 :     BOOST_CHECK_CLOSE( o_ldouble.imag(), i_ldouble.imag(), 1e-5);</span>
<span class="lineNum">    2277 </span><span class="lineCov">          3 :   }</span>
<a name="2278"><span class="lineNum">    2278 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2279 </span>            : 
<span class="lineNum">    2280 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_complex )</span>
<span class="lineNum">    2281 </span>            : {
<span class="lineNum">    2282 </span><span class="lineCov">          1 :   test_complex&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2283"><span class="lineNum">    2283 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2284 </span>            : 
<span class="lineNum">    2285 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_complex )</span>
<span class="lineNum">    2286 </span>            : {
<span class="lineNum">    2287 </span><span class="lineCov">          1 :   test_complex&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2288"><span class="lineNum">    2288 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2289 </span>            : 
<span class="lineNum">    2290 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_complex )</span>
<span class="lineNum">    2291 </span>            : {
<span class="lineNum">    2292 </span><span class="lineCov">          1 :   test_complex&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2293 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2294 </span>            : 
<a name="2295"><span class="lineNum">    2295 </span>            : // ######################################################################</a>
<span class="lineNum">    2296 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2297 </span><span class="lineCov">          3 : void test_bitset()</span>
<span class="lineNum">    2298 </span>            : {
<span class="lineNum">    2299 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<a name="2300"><span class="lineNum">    2300 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span></a>
<a name="2301"><span class="lineNum">    2301 </span>            : </a>
<a name="2302"><span class="lineNum">    2302 </span><span class="lineCov">        303 :   auto rng32  = [&amp;](){ return random_binary_string&lt;32&gt;( gen ); };</span></a>
<span class="lineNum">    2303 </span><span class="lineCov">        303 :   auto rng65  = [&amp;](){ return random_binary_string&lt;65&gt;( gen ); };</span>
<span class="lineNum">    2304 </span><span class="lineCov">        303 :   auto rng256 = [&amp;](){ return random_binary_string&lt;256&gt;( gen ); };</span>
<span class="lineNum">    2305 </span>            : 
<span class="lineNum">    2306 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2307 </span>            :   {
<span class="lineNum">    2308 </span><span class="lineCov">        300 :     std::bitset&lt;32&gt; o_bit32( rng32() );</span>
<span class="lineNum">    2309 </span><span class="lineCov">        300 :     std::bitset&lt;65&gt; o_bit65( rng65() );</span>
<span class="lineNum">    2310 </span><span class="lineCov">        300 :     std::bitset&lt;256&gt; o_bit256( rng256() );</span>
<span class="lineNum">    2311 </span>            : 
<span class="lineNum">    2312 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2313 </span>            :     {
<span class="lineNum">    2314 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2315 </span>            : 
<span class="lineNum">    2316 </span><span class="lineCov">        300 :       oar(o_bit32);</span>
<span class="lineNum">    2317 </span><span class="lineCov">        300 :       oar(o_bit65);</span>
<span class="lineNum">    2318 </span><span class="lineCov">        300 :       oar(o_bit256);</span>
<span class="lineNum">    2319 </span>            :     }
<span class="lineNum">    2320 </span>            : 
<span class="lineNum">    2321 </span><span class="lineCov">        300 :     std::bitset&lt;32&gt;  i_bit32;</span>
<span class="lineNum">    2322 </span><span class="lineCov">        300 :     std::bitset&lt;65&gt;  i_bit65;</span>
<span class="lineNum">    2323 </span><span class="lineCov">        300 :     std::bitset&lt;256&gt; i_bit256;</span>
<span class="lineNum">    2324 </span>            : 
<span class="lineNum">    2325 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2326 </span>            :     {
<span class="lineNum">    2327 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2328 </span>            : 
<span class="lineNum">    2329 </span><span class="lineCov">        300 :       iar(i_bit32);</span>
<span class="lineNum">    2330 </span><span class="lineCov">        300 :       iar(i_bit65);</span>
<span class="lineNum">    2331 </span><span class="lineCov">        300 :       iar(i_bit256);</span>
<span class="lineNum">    2332 </span>            :     }
<span class="lineNum">    2333 </span>            : 
<span class="lineNum">    2334 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( o_bit32, i_bit32 );</span>
<span class="lineNum">    2335 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( o_bit65, i_bit65 );</span>
<span class="lineNum">    2336 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL( o_bit256, i_bit256 );</span>
<span class="lineNum">    2337 </span><span class="lineCov">          3 :   }</span>
<a name="2338"><span class="lineNum">    2338 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2339 </span>            : 
<span class="lineNum">    2340 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_bitset )</span>
<span class="lineNum">    2341 </span>            : {
<span class="lineNum">    2342 </span><span class="lineCov">          1 :   test_bitset&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2343"><span class="lineNum">    2343 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2344 </span>            : 
<span class="lineNum">    2345 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_bitset )</span>
<span class="lineNum">    2346 </span>            : {
<span class="lineNum">    2347 </span><span class="lineCov">          1 :   test_bitset&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2348"><span class="lineNum">    2348 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2349 </span>            : 
<span class="lineNum">    2350 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_bitset )</span>
<span class="lineNum">    2351 </span>            : {
<span class="lineNum">    2352 </span><span class="lineCov">          1 :   test_bitset&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2353 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2354 </span>            : 
<a name="2355"><span class="lineNum">    2355 </span>            : // ######################################################################</a>
<span class="lineNum">    2356 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2357 </span><span class="lineCov">          3 : void test_chrono()</span>
<span class="lineNum">    2358 </span>            : {
<span class="lineNum">    2359 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2360 </span>            :   {
<span class="lineNum">    2361 </span><span class="lineCov">        300 :     auto o_timePoint1 = std::chrono::system_clock::now();</span>
<span class="lineNum">    2362 </span><span class="lineCov">        300 :     auto o_timePoint2 = std::chrono::steady_clock::now();</span>
<span class="lineNum">    2363 </span><span class="lineCov">        300 :     auto o_timePoint3 = std::chrono::high_resolution_clock::now();</span>
<span class="lineNum">    2364 </span>            : 
<span class="lineNum">    2365 </span><span class="lineCov">        300 :     auto o_duration1 = std::chrono::system_clock::now() - o_timePoint1;</span>
<span class="lineNum">    2366 </span><span class="lineCov">        300 :     auto o_duration2 = std::chrono::steady_clock::now() - o_timePoint2;</span>
<span class="lineNum">    2367 </span><span class="lineCov">        300 :     auto o_duration3 = std::chrono::high_resolution_clock::now() - o_timePoint3;</span>
<span class="lineNum">    2368 </span>            : 
<span class="lineNum">    2369 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2370 </span>            :     {
<span class="lineNum">    2371 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2372 </span>            : 
<span class="lineNum">    2373 </span><span class="lineCov">        300 :       oar(o_timePoint1);</span>
<span class="lineNum">    2374 </span><span class="lineCov">        300 :       oar(o_timePoint2);</span>
<span class="lineNum">    2375 </span><span class="lineCov">        300 :       oar(o_timePoint3);</span>
<span class="lineNum">    2376 </span><span class="lineCov">        300 :       oar(o_duration1);</span>
<span class="lineNum">    2377 </span><span class="lineCov">        300 :       oar(o_duration2);</span>
<span class="lineNum">    2378 </span><span class="lineCov">        300 :       oar(o_duration3);</span>
<span class="lineNum">    2379 </span>            :     }
<span class="lineNum">    2380 </span>            : 
<span class="lineNum">    2381 </span><span class="lineCov">        300 :     decltype(o_timePoint1) i_timePoint1;</span>
<span class="lineNum">    2382 </span><span class="lineCov">        300 :     decltype(o_timePoint2) i_timePoint2;</span>
<span class="lineNum">    2383 </span><span class="lineCov">        300 :     decltype(o_timePoint3) i_timePoint3;</span>
<span class="lineNum">    2384 </span><span class="lineCov">        300 :     decltype(o_duration1) i_duration1;</span>
<span class="lineNum">    2385 </span><span class="lineCov">        300 :     decltype(o_duration2) i_duration2;</span>
<span class="lineNum">    2386 </span><span class="lineCov">        300 :     decltype(o_duration3) i_duration3;</span>
<span class="lineNum">    2387 </span>            : 
<span class="lineNum">    2388 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2389 </span>            :     {
<span class="lineNum">    2390 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2391 </span>            : 
<span class="lineNum">    2392 </span><span class="lineCov">        300 :       iar(i_timePoint1);</span>
<span class="lineNum">    2393 </span><span class="lineCov">        300 :       iar(i_timePoint2);</span>
<span class="lineNum">    2394 </span><span class="lineCov">        300 :       iar(i_timePoint3);</span>
<span class="lineNum">    2395 </span><span class="lineCov">        300 :       iar(i_duration1);</span>
<span class="lineNum">    2396 </span><span class="lineCov">        300 :       iar(i_duration2);</span>
<span class="lineNum">    2397 </span><span class="lineCov">        300 :       iar(i_duration3);</span>
<span class="lineNum">    2398 </span>            :     }
<span class="lineNum">    2399 </span>            : 
<span class="lineNum">    2400 </span><span class="lineCov">        300 :     BOOST_CHECK( o_timePoint1 == i_timePoint1 );</span>
<span class="lineNum">    2401 </span><span class="lineCov">        300 :     BOOST_CHECK( o_timePoint2 == i_timePoint2 );</span>
<span class="lineNum">    2402 </span><span class="lineCov">        300 :     BOOST_CHECK( o_timePoint3 == i_timePoint3 );</span>
<span class="lineNum">    2403 </span><span class="lineCov">        300 :     BOOST_CHECK( o_duration1 == i_duration1 );</span>
<span class="lineNum">    2404 </span><span class="lineCov">        300 :     BOOST_CHECK( o_duration2 == i_duration2 );</span>
<span class="lineNum">    2405 </span><span class="lineCov">        300 :     BOOST_CHECK( o_duration3 == i_duration3 );</span>
<span class="lineNum">    2406 </span>            :   }
<a name="2407"><span class="lineNum">    2407 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2408 </span>            : 
<span class="lineNum">    2409 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_chrono )</span>
<span class="lineNum">    2410 </span>            : {
<span class="lineNum">    2411 </span><span class="lineCov">          1 :   test_chrono&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2412"><span class="lineNum">    2412 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2413 </span>            : 
<span class="lineNum">    2414 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_chrono )</span>
<span class="lineNum">    2415 </span>            : {
<span class="lineNum">    2416 </span><span class="lineCov">          1 :   test_chrono&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2417"><span class="lineNum">    2417 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2418 </span>            : 
<span class="lineNum">    2419 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_chrono )</span>
<span class="lineNum">    2420 </span>            : {
<span class="lineNum">    2421 </span><span class="lineCov">          1 :   test_chrono&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2422 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2423 </span>            : 
<span class="lineNum">    2424 </span>            : // ######################################################################
<span class="lineNum">    2425 </span>            : class SpecializedMSerialize
<span class="lineNum">    2426 </span>            : {
<span class="lineNum">    2427 </span>            :   public:
<span class="lineNum">    2428 </span>            :     int x;
<span class="lineNum">    2429 </span>            : 
<span class="lineNum">    2430 </span>            :   private:
<a name="2431"><span class="lineNum">    2431 </span>            :     friend class cereal::access;</a>
<span class="lineNum">    2432 </span>            :     template &lt;class Archive&gt;
<span class="lineNum">    2433 </span><span class="lineCov">        600 :     void serialize( Archive &amp; ar )</span>
<span class="lineNum">    2434 </span>            :     {
<span class="lineNum">    2435 </span><span class="lineCov">        600 :       ar( x );</span>
<span class="lineNum">    2436 </span><span class="lineCov">        600 :     }</span>
<span class="lineNum">    2437 </span>            : };
<span class="lineNum">    2438 </span>            : 
<span class="lineNum">    2439 </span>            : class SpecializedMSplit
<span class="lineNum">    2440 </span>            : {
<span class="lineNum">    2441 </span>            :   public:
<span class="lineNum">    2442 </span>            :     int x;
<span class="lineNum">    2443 </span>            : 
<span class="lineNum">    2444 </span>            :   private:
<a name="2445"><span class="lineNum">    2445 </span>            :     friend class cereal::access;</a>
<span class="lineNum">    2446 </span>            :     template &lt;class Archive&gt;
<span class="lineNum">    2447 </span><span class="lineCov">        300 :     void save( Archive &amp; ar ) const</span>
<span class="lineNum">    2448 </span>            :     {
<span class="lineNum">    2449 </span><span class="lineCov">        300 :       ar( x );</span>
<span class="lineNum">    2450 </span><span class="lineCov">        300 :     }</span>
<a name="2451"><span class="lineNum">    2451 </span>            : </a>
<span class="lineNum">    2452 </span>            :     template &lt;class Archive&gt;
<span class="lineNum">    2453 </span><span class="lineCov">        300 :     void load( Archive &amp; ar )</span>
<span class="lineNum">    2454 </span>            :     {
<span class="lineNum">    2455 </span><span class="lineCov">        300 :       ar( x );</span>
<span class="lineNum">    2456 </span><span class="lineCov">        300 :     }</span>
<span class="lineNum">    2457 </span>            : };
<span class="lineNum">    2458 </span>            : 
<span class="lineNum">    2459 </span>            : class SpecializedNMSerialize
<span class="lineNum">    2460 </span>            : {
<span class="lineNum">    2461 </span>            :   public:
<span class="lineNum">    2462 </span>            :     int x;
<span class="lineNum">    2463 </span>            : };
<a name="2464"><span class="lineNum">    2464 </span>            : </a>
<span class="lineNum">    2465 </span>            : template &lt;class Archive&gt;
<span class="lineNum">    2466 </span><span class="lineCov">        600 : void serialize( Archive &amp; ar, SpecializedNMSerialize &amp; s )</span>
<span class="lineNum">    2467 </span>            : {
<span class="lineNum">    2468 </span><span class="lineCov">        600 :   ar( s.x );</span>
<span class="lineNum">    2469 </span><span class="lineCov">        600 : }</span>
<span class="lineNum">    2470 </span>            : 
<span class="lineNum">    2471 </span>            : class SpecializedNMSplit
<span class="lineNum">    2472 </span>            : {
<span class="lineNum">    2473 </span>            :   public:
<span class="lineNum">    2474 </span>            :     int x;
<span class="lineNum">    2475 </span>            : };
<a name="2476"><span class="lineNum">    2476 </span>            : </a>
<span class="lineNum">    2477 </span>            : template &lt;class Archive&gt;
<span class="lineNum">    2478 </span><span class="lineCov">        300 : void load( Archive &amp; ar, SpecializedNMSplit &amp; s )</span>
<span class="lineNum">    2479 </span>            : {
<span class="lineNum">    2480 </span><span class="lineCov">        300 :   ar( s.x );</span>
<span class="lineNum">    2481 </span><span class="lineCov">        300 : }</span>
<a name="2482"><span class="lineNum">    2482 </span>            : </a>
<span class="lineNum">    2483 </span>            : template &lt;class Archive&gt;
<span class="lineNum">    2484 </span><span class="lineCov">        300 : void save( Archive &amp; ar, SpecializedNMSplit const &amp; s )</span>
<span class="lineNum">    2485 </span>            : {
<span class="lineNum">    2486 </span><span class="lineCov">        300 :   ar( s.x );</span>
<span class="lineNum">    2487 </span><span class="lineCov">        300 : }</span>
<span class="lineNum">    2488 </span>            : 
<span class="lineNum">    2489 </span>            : namespace cereal
<span class="lineNum">    2490 </span>            : {
<span class="lineNum">    2491 </span>            :   template &lt;class Archive&gt; struct specialize&lt;Archive, SpecializedMSerialize, cereal::specialization::member_serialize&gt; {};
<span class="lineNum">    2492 </span>            :   template &lt;class Archive&gt; struct specialize&lt;Archive, SpecializedMSplit, cereal::specialization::member_load_save&gt; {};
<span class="lineNum">    2493 </span>            :   template &lt;class Archive&gt; struct specialize&lt;Archive, SpecializedNMSerialize, cereal::specialization::non_member_serialize&gt; {};
<span class="lineNum">    2494 </span>            :   template &lt;class Archive&gt; struct specialize&lt;Archive, SpecializedNMSplit, cereal::specialization::non_member_load_save&gt; {};
<span class="lineNum">    2495 </span>            : }
<a name="2496"><span class="lineNum">    2496 </span>            : </a>
<span class="lineNum">    2497 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2498 </span><span class="lineCov">          3 : void test_structs_specialized()</span>
<span class="lineNum">    2499 </span>            : {
<span class="lineNum">    2500 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<span class="lineNum">    2501 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span>
<span class="lineNum">    2502 </span>            : 
<span class="lineNum">    2503 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2504 </span>            :   {
<span class="lineNum">    2505 </span><span class="lineCov">        300 :     SpecializedMSerialize  o_iser = { random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2506 </span><span class="lineCov">        300 :     SpecializedMSplit      o_ispl = { random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2507 </span><span class="lineCov">        300 :     SpecializedNMSerialize o_eser = { random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2508 </span><span class="lineCov">        300 :     SpecializedNMSplit     o_espl = { random_value&lt;int&gt;(gen) };</span>
<span class="lineNum">    2509 </span>            : 
<span class="lineNum">    2510 </span><span class="lineCov">        300 :     std::ostringstream os;</span>
<span class="lineNum">    2511 </span>            :     {
<span class="lineNum">    2512 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2513 </span>            : 
<span class="lineNum">    2514 </span><span class="lineCov">        300 :       oar( o_iser, o_ispl, o_eser, o_espl);</span>
<span class="lineNum">    2515 </span>            :     }
<span class="lineNum">    2516 </span>            : 
<span class="lineNum">    2517 </span>            :     decltype(o_iser) i_iser;
<span class="lineNum">    2518 </span>            :     decltype(o_ispl) i_ispl;
<span class="lineNum">    2519 </span>            :     decltype(o_eser) i_eser;
<span class="lineNum">    2520 </span>            :     decltype(o_espl) i_espl;
<span class="lineNum">    2521 </span>            : 
<span class="lineNum">    2522 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2523 </span>            :     {
<span class="lineNum">    2524 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2525 </span>            : 
<span class="lineNum">    2526 </span><span class="lineCov">        300 :       iar( i_iser, i_ispl, i_eser, i_espl);</span>
<span class="lineNum">    2527 </span>            :     }
<span class="lineNum">    2528 </span>            : 
<span class="lineNum">    2529 </span><span class="lineCov">        300 :     BOOST_CHECK(i_iser.x == o_iser.x);</span>
<span class="lineNum">    2530 </span><span class="lineCov">        300 :     BOOST_CHECK(i_ispl.x == o_ispl.x);</span>
<span class="lineNum">    2531 </span><span class="lineCov">        300 :     BOOST_CHECK(i_eser.x == o_eser.x);</span>
<span class="lineNum">    2532 </span><span class="lineCov">        300 :     BOOST_CHECK(i_espl.x == o_espl.x);</span>
<span class="lineNum">    2533 </span><span class="lineCov">          3 :   }</span>
<a name="2534"><span class="lineNum">    2534 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2535 </span>            : 
<span class="lineNum">    2536 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_structs_specialized )</span>
<span class="lineNum">    2537 </span>            : {
<span class="lineNum">    2538 </span><span class="lineCov">          1 :   test_structs_specialized&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2539"><span class="lineNum">    2539 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2540 </span>            : 
<span class="lineNum">    2541 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_structs_specialized )</span>
<span class="lineNum">    2542 </span>            : {
<span class="lineNum">    2543 </span><span class="lineCov">          1 :   test_structs_specialized&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2544"><span class="lineNum">    2544 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2545 </span>            : 
<span class="lineNum">    2546 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_structs_specialized )</span>
<span class="lineNum">    2547 </span>            : {
<span class="lineNum">    2548 </span><span class="lineCov">          1 :   test_structs_specialized&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2549 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2550 </span>            : 
<span class="lineNum">    2551 </span>            : // ######################################################################
<a name="2552"><span class="lineNum">    2552 </span>            : struct PolyBase</a>
<a name="2553"><span class="lineNum">    2553 </span>            : {</a>
<span class="lineNum">    2554 </span><span class="lineCov">        600 :   PolyBase() = default;</span>
<span class="lineNum">    2555 </span><span class="lineCov">        600 :   PolyBase( int xx, float yy ) : x(xx), y(yy) {}</span>
<span class="lineNum">    2556 </span>            :   int x;
<span class="lineNum">    2557 </span>            :   float y;
<a name="2558"><span class="lineNum">    2558 </span>            : </a>
<span class="lineNum">    2559 </span>            :   template &lt;class Archive&gt;
<span class="lineNum">    2560 </span><span class="lineCov">       1200 :   void serialize( Archive &amp; ar )</span>
<span class="lineNum">    2561 </span>            :   {
<span class="lineNum">    2562 </span><span class="lineCov">       1200 :     ar( x, y );</span>
<span class="lineNum">    2563 </span><span class="lineCov">       1200 :   }</span>
<span class="lineNum">    2564 </span>            : 
<a name="2565"><span class="lineNum">    2565 </span>            :   virtual void foo() = 0;</a>
<span class="lineNum">    2566 </span>            : 
<span class="lineNum">    2567 </span><span class="lineCov">       1200 :   bool operator==( PolyBase const &amp; other ) const</span>
<span class="lineNum">    2568 </span>            :   {
<span class="lineNum">    2569 </span><span class="lineCov">       1200 :     return x == other.x &amp;&amp; std::abs(y - other.y) &lt; 1e-5;</span>
<span class="lineNum">    2570 </span>            :   }
<span class="lineNum">    2571 </span>            : };
<span class="lineNum">    2572 </span>            : 
<a name="2573"><span class="lineNum">    2573 </span>            : struct PolyDerived : PolyBase</a>
<a name="2574"><span class="lineNum">    2574 </span>            : {</a>
<span class="lineNum">    2575 </span><span class="lineCov">        600 :   PolyDerived() = default;</span>
<span class="lineNum">    2576 </span><span class="lineCov">        600 :   PolyDerived( int xx, float yy, bool aa, double bb ) :</span>
<span class="lineNum">    2577 </span><span class="lineCov">        600 :     PolyBase( xx, yy ), a(aa), b(bb) {}</span>
<span class="lineNum">    2578 </span>            : 
<span class="lineNum">    2579 </span>            :   bool a;
<span class="lineNum">    2580 </span>            :   double b;
<a name="2581"><span class="lineNum">    2581 </span>            : </a>
<span class="lineNum">    2582 </span>            :   template &lt;class Archive&gt;
<span class="lineNum">    2583 </span><span class="lineCov">       1200 :   void serialize( Archive &amp; ar )</span>
<span class="lineNum">    2584 </span>            :   {
<span class="lineNum">    2585 </span><span class="lineCov">       1200 :     ar( cereal::base_class&lt;PolyBase&gt;( this ),</span>
<span class="lineNum">    2586 </span><span class="lineCov">       2400 :         a, b );</span>
<a name="2587"><span class="lineNum">    2587 </span><span class="lineCov">       1200 :   }</span></a>
<span class="lineNum">    2588 </span>            : 
<span class="lineNum">    2589 </span><span class="lineCov">       1200 :   bool operator==( PolyDerived const &amp; other ) const</span>
<span class="lineNum">    2590 </span>            :   {
<span class="lineNum">    2591 </span><span class="lineCov">       1200 :     return PolyBase::operator==( other ) &amp;&amp; a == other.a &amp;&amp; std::abs(b - other.b) &lt; 1e-5;</span>
<a name="2592"><span class="lineNum">    2592 </span>            :   }</a>
<span class="lineNum">    2593 </span>            : 
<span class="lineNum">    2594 </span><span class="lineNoCov">          0 :   void foo() {}</span>
<a name="2595"><span class="lineNum">    2595 </span>            : };</a>
<span class="lineNum">    2596 </span>            : 
<span class="lineNum">    2597 </span><span class="lineNoCov">          0 : std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, PolyDerived const &amp; s)</span>
<span class="lineNum">    2598 </span>            : {
<span class="lineNum">    2599 </span><span class="lineNoCov">          0 :     os &lt;&lt; &quot;[x: &quot; &lt;&lt; s.x &lt;&lt; &quot; y: &quot; &lt;&lt; s.y &lt;&lt; &quot; a: &quot; &lt;&lt; s.a &lt;&lt; &quot; b: &quot; &lt;&lt; s.b &lt;&lt; &quot;]&quot;;</span>
<span class="lineNum">    2600 </span><span class="lineNoCov">          0 :     return os;</span>
<a name="2601"><span class="lineNum">    2601 </span>            : }</a>
<span class="lineNum">    2602 </span>            : 
<span class="lineNum">    2603 </span><span class="lineCov">        904 : CEREAL_REGISTER_TYPE(PolyDerived);</span>
<a name="2604"><span class="lineNum">    2604 </span>            : </a>
<span class="lineNum">    2605 </span>            : template &lt;class IArchive, class OArchive&gt;
<span class="lineNum">    2606 </span><span class="lineCov">          3 : void test_polymorphic()</span>
<span class="lineNum">    2607 </span>            : {
<span class="lineNum">    2608 </span><span class="lineCov">          3 :   std::random_device rd;</span>
<a name="2609"><span class="lineNum">    2609 </span><span class="lineCov">          3 :   std::mt19937 gen(rd());</span></a>
<a name="2610"><span class="lineNum">    2610 </span>            : </a>
<a name="2611"><span class="lineNum">    2611 </span><span class="lineCov">        603 :   auto rngB = [&amp;](){ return random_value&lt;int&gt;( gen ) % 2; };</span></a>
<a name="2612"><span class="lineNum">    2612 </span><span class="lineCov">        603 :   auto rngI = [&amp;](){ return random_value&lt;int&gt;( gen ); };</span></a>
<span class="lineNum">    2613 </span><span class="lineCov">        603 :   auto rngF = [&amp;](){ return random_value&lt;float&gt;( gen ); };</span>
<span class="lineNum">    2614 </span><span class="lineCov">        603 :   auto rngD = [&amp;](){ return random_value&lt;double&gt;( gen ); };</span>
<span class="lineNum">    2615 </span>            : 
<span class="lineNum">    2616 </span><span class="lineCov">        303 :   for(int i=0; i&lt;100; ++i)</span>
<span class="lineNum">    2617 </span>            :   {
<span class="lineNum">    2618 </span><span class="lineCov">        300 :     std::shared_ptr&lt;PolyBase&gt; o_shared = std::make_shared&lt;PolyDerived&gt;( rngI(), rngF(), rngB(), rngD() );</span>
<span class="lineNum">    2619 </span><span class="lineCov">        600 :     std::weak_ptr&lt;PolyBase&gt;   o_weak = o_shared;</span>
<span class="lineNum">    2620 </span><span class="lineCov">        600 :     std::unique_ptr&lt;PolyBase&gt; o_unique( new PolyDerived( rngI(), rngF(), rngB(), rngD() ) );</span>
<span class="lineNum">    2621 </span>            : 
<span class="lineNum">    2622 </span><span class="lineCov">        600 :     std::ostringstream os;</span>
<span class="lineNum">    2623 </span>            :     {
<span class="lineNum">    2624 </span><span class="lineCov">        300 :       OArchive oar(os);</span>
<span class="lineNum">    2625 </span>            : 
<span class="lineNum">    2626 </span><span class="lineCov">        300 :       oar( o_shared, o_weak, o_unique );</span>
<span class="lineNum">    2627 </span>            :     }
<span class="lineNum">    2628 </span>            : 
<span class="lineNum">    2629 </span><span class="lineCov">        600 :     decltype(o_shared) i_shared;</span>
<span class="lineNum">    2630 </span><span class="lineCov">        600 :     decltype(o_weak) i_weak;</span>
<span class="lineNum">    2631 </span><span class="lineCov">        600 :     decltype(o_unique) i_unique;</span>
<span class="lineNum">    2632 </span>            : 
<span class="lineNum">    2633 </span><span class="lineCov">        600 :     std::istringstream is(os.str());</span>
<span class="lineNum">    2634 </span>            :     {
<span class="lineNum">    2635 </span><span class="lineCov">        300 :       IArchive iar(is);</span>
<span class="lineNum">    2636 </span>            : 
<span class="lineNum">    2637 </span><span class="lineCov">        300 :       iar( i_shared, i_weak, i_unique );</span>
<span class="lineNum">    2638 </span>            :     }
<span class="lineNum">    2639 </span>            : 
<span class="lineNum">    2640 </span><span class="lineCov">        600 :     auto i_locked = i_weak.lock();</span>
<span class="lineNum">    2641 </span><span class="lineCov">        600 :     auto o_locked = o_weak.lock();</span>
<span class="lineNum">    2642 </span>            : 
<span class="lineNum">    2643 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(i_shared.get(), i_locked.get());</span>
<span class="lineNum">    2644 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*((PolyDerived*)i_shared.get()), *((PolyDerived*)o_shared.get()));</span>
<span class="lineNum">    2645 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*((PolyDerived*)i_shared.get()), *((PolyDerived*)i_locked.get()));</span>
<span class="lineNum">    2646 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*((PolyDerived*)i_locked.get()), *((PolyDerived*)o_locked.get()));</span>
<span class="lineNum">    2647 </span><span class="lineCov">        300 :     BOOST_CHECK_EQUAL(*((PolyDerived*)i_unique.get()), *((PolyDerived*)o_unique.get()));</span>
<span class="lineNum">    2648 </span><span class="lineCov">          3 :   }</span>
<a name="2649"><span class="lineNum">    2649 </span><span class="lineCov">          3 : }</span></a>
<span class="lineNum">    2650 </span>            : 
<span class="lineNum">    2651 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( binary_polymorphic )</span>
<span class="lineNum">    2652 </span>            : {
<span class="lineNum">    2653 </span><span class="lineCov">          1 :   test_polymorphic&lt;cereal::BinaryInputArchive, cereal::BinaryOutputArchive&gt;();</span>
<a name="2654"><span class="lineNum">    2654 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2655 </span>            : 
<span class="lineNum">    2656 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( xml_polymorphic )</span>
<span class="lineNum">    2657 </span>            : {
<span class="lineNum">    2658 </span><span class="lineCov">          1 :   test_polymorphic&lt;cereal::XMLInputArchive, cereal::XMLOutputArchive&gt;();</span>
<a name="2659"><span class="lineNum">    2659 </span><span class="lineCov">          1 : }</span></a>
<span class="lineNum">    2660 </span>            : 
<span class="lineNum">    2661 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( json_polymorphic )</span>
<span class="lineNum">    2662 </span>            : {
<span class="lineNum">    2663 </span><span class="lineCov">          1 :   test_polymorphic&lt;cereal::JSONInputArchive, cereal::JSONOutputArchive&gt;();</span>
<span class="lineNum">    2664 </span><span class="lineCov">          1 : }</span>
<span class="lineNum">    2665 </span>            : 
<a name="2666"><span class="lineNum">    2666 </span>            : namespace mynamespace { struct MyCustomClass {}; }</a>
<span class="lineNum">    2667 </span>            : 
<span class="lineNum">    2668 </span><span class="lineCov">          3 : BOOST_AUTO_TEST_CASE( util )</span>
<a name="2669"><span class="lineNum">    2669 </span>            : {</a>
<span class="lineNum">    2670 </span><span class="lineCov">          1 :   BOOST_CHECK_EQUAL( cereal::util::demangledName&lt;mynamespace::MyCustomClass&gt;(), &quot;mynamespace::MyCustomClass&quot; );</span>
<span class="lineNum">    2671 </span><span class="lineCov">          4 : }</span>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.10</a></td></tr>
  </table>
  <br>

</body>
</html>
